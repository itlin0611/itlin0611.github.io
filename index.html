<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2026東北家族旅遊 - 完整行程總覽</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap');
        body { font-family: 'Noto Sans TC', sans-serif; background-color: #f8fafc; }
        .timeline-line { position: absolute; left: 24px; top: 40px; bottom: 0; width: 2px; background-color: #e2e8f0; z-index: 0; }
        .hide-scrollbar::-webkit-scrollbar { display: none; }
        .hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        .animate-slide-up { animation: slideUp 0.4s ease-out forwards; }
        @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .sticky-sidebar { position: sticky; top: 0; height: 100vh; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef, useMemo } = React;
        
        const Icon = ({ name, size = 20, color = "currentColor", className = "" }) => {
            useEffect(() => { lucide.createIcons(); }, [name]);
            return <i data-lucide={name} width={size} height={size} stroke={color} className={className}></i>;
        };

        const App = () => {
            const [currentDay, setCurrentDay] = useState(1);

            const daysData = useMemo(() => ({
                1: {
                    date: "2026/02/01", weekday: "週日",
                    weather: { start: { location: "台中", temp: "22°C", condition: "晴", icon: "sun" }, end: { location: "成田", temp: "5°C", condition: "寒冷", icon: "snowflake" } },
                    schedule: [
                        { type: "start", time: "09:00", location: "台中市南區工學路15巷8號", note: "準時出發前往桃園" },
                        { type: "transport", from: "台中", to: "大園", googleMapUrl: "https://www.google.com/maps/dir/?api=1&origin=台中市南區工學路15巷8號&destination=成德生猛海鮮", distance: "135km", estTimeBase: 105, bufferPercent: 1.15, method: "開車 (國道1號)" },
                        { type: "spot", arrival: "11:00", departure: "12:35", duration: 95, name: "成德生猛海鮮 (午餐)", address: "桃園市大園區國際路二段588號", tags: ["10人合菜", "家族聚餐"], description: "位於大園區的大型海鮮餐廳，食材新鮮且出菜迅速。10人聚餐首選，環境寬敞。推薦點選適合家人的現撈海鮮合菜，節省點餐時間。", price: "預估 NT$5,000-8,000/桌", parking: "餐廳專用停車場", note: "週日中午人多，務必提前電話預訂" },
                        { type: "transport", from: "餐廳", to: "停車場", googleMapUrl: "https://www.google.com/maps/dir/?api=1&origin=成德生猛海鮮&destination=日月亭平安場停車場", distance: "6km", estTimeBase: 10, bufferPercent: 1.0, method: "開車" },
                        { type: "spot", arrival: "12:45", departure: "13:00", duration: 15, name: "日月亭停車場", address: "桃園市大園區中正東路三段", tags: ["停車", "接駁"], description: "辦理信用卡特約停車手續，領取收執聯。隨即搭乘停車場免費接駁車前往一航廈。", price: "依信用卡優惠", note: "確認接駁車班次" },
                        { type: "transport", from: "停車場", to: "桃園機場T1", distance: "3.5km", estTimeBase: 10, bufferPercent: 1.0, method: "停車場接駁車" },
                        { type: "spot", arrival: "13:00", departure: "15:35", duration: 155, name: "桃園機場第一航廈 (虎航)", tags: ["IT202", "Check-in"], description: "辦理行李託運、通過安全檢查與移民局證照查驗。15:35 準時起飛。", note: "建議13:30前完成櫃檯報到" },
                        { type: "transport", from: "台灣", to: "成田", distance: "2100km", estTimeBase: 240, bufferPercent: 1.0, method: "飛機 (IT202)", note: "19:35 抵達成田T2" },
                        { type: "hotel", arrival: "20:30", name: "東橫INN 成田機場新館", address: "千葉県成田市取香560", tags: ["機場接駁"], description: "抵達後辦理入關。搭乘免費接駁車前往飯店。\n【接駁車時段參考】：20:15, 20:45, 21:15, 21:45, 22:15。\n乘車處：二航 1樓 26號站牌。", price: "已預訂", note: "下機後請儘速領行李前往26號站牌" }
                    ]
                },
                2: {
                    date: "2026/02/02", weekday: "週一",
                    weather: { start: { location: "成田", temp: "9°C", condition: "晴時多雲", icon: "sun" }, end: { location: "水戶", temp: "8°C", condition: "多雲", icon: "cloud" } },
                    schedule: [
                        { type: "start", time: "08:45", location: "飯店退房", note: "搭接駁車往租車店" },
                        { type: "transport", from: "飯店", to: "租車店", googleMapUrl: "https://www.google.com/maps/dir/?api=1&origin=Toyoko+Inn+Narita+Airport+Shinkan&destination=Relax+International+Car+Rental+Narita", distance: "1.2km", estTimeBase: 5, bufferPercent: 2.0, method: "飯店接駁/計程車" },
                        { type: "spot", arrival: "09:00", departure: "09:40", duration: 40, name: "Relax-Rent a Car (取車)", address: "千葉県成田市新田90-1", tags: ["租車", "ETC"], description: "辦理租車手續，檢查車身刮痕，確認ETC卡與導航設定。確認配備雪胎以因應福島山區路況。", price: "依預約單", note: "需備妥日文譯本、駕照正本與護照" },
                        { type: "transport", from: "成田", to: "大洗", googleMapUrl: "https://www.google.com/maps/dir/?api=1&origin=Relax+International+Car+Rental+Narita&destination=Kaniya+Oarai&avoid=t", distance: "75km", estTimeBase: 120, bufferPercent: 1.1, method: "開車 (國道51號)", note: "選擇不開高速公路(節省料金2930)" },
                        { type: "spot", arrival: "11:50", departure: "12:50", duration: 60, name: "かに弥 (午餐)", address: "茨城県東茨城郡大洗町磯浜町8253-22", tags: ["螃蟹料理", "大洗名物"], description: "位於大洗海鮮市場旁。必吃名物：螃蟹味噌湯、螃蟹飯。食材由產地直達，價格極其平實。一樓也可採買海鮮乾貨。", price: "約 1500-2000円", parking: "海鮮市場免費停車場" },
                        { type: "transport", from: "餐廳", to: "鳥居", googleMapUrl: "https://www.google.com/maps/dir/?api=1&origin=Kaniya+Oarai&destination=Kamiiso+no+Torii", distance: "2.5km", estTimeBase: 6, bufferPercent: 1.5, method: "開車" },
                        { type: "spot", arrival: "13:00", departure: "13:30", duration: 30, name: "大洗磯前神社 神磯鳥居", address: "茨城県東茨城郡大洗町磯浜町6890", mapcode: "239 536 575*06", tags: ["海上鳥居", "日出勝地"], description: "矗立於太平洋岩礁上的白色鳥居。波濤洶湧的海浪拍打鳥居是日本著名的能量景點。也是動畫《少女與戰車》的聖地。", price: "免費", parking: "神社專用免費停車場" },
                        { type: "transport", from: "鳥居", to: "水族館", distance: "1.8km", estTimeBase: 5, bufferPercent: 1.2, method: "開車" },
                        { type: "spot", arrival: "13:40", departure: "16:00", duration: 140, name: "大洗水族館 Aqua World", address: "茨城県東茨城郡大洗町磯浜町8252-3", mapcode: "239 567 493*33", tags: ["日本一鯊魚", "海豚秀"], description: "號稱日本鯊魚飼育種類第一的水族館，擁有超過50種鯊魚，極具震撼力。館內高達數層樓的「相遇之海」大水槽再現了茨城外海的豐富生態。最受歡迎的是以太平洋為背景的戶外海豚與海獅表演，冬季雖冷但視野開闊，孩子們一定會看得目不轉睛。", price: "大人 2300円 / 學生 1100円", parking: "免費大型停車場 (750台)" },
                        { type: "transport", from: "水族館", to: "Montbell", distance: "5km", estTimeBase: 10, method: "開車" },
                        { type: "spot", arrival: "16:15", departure: "17:00", duration: 45, name: "Montbell ひたちなか店", address: "茨城県ひたちなか市新光町35", tags: ["戶外裝備", "免稅"], description: "兩層樓的大型戶外用品店。在此補齊雪地保暖衣物與止滑裝備。", price: "免稅 (Tax Free)", parking: "共用大型免費停車場" },
                        { type: "transport", from: "Montbell", to: "Costco", distance: "0.5km", estTimeBase: 3, method: "開車" },
                        { type: "spot", arrival: "17:05", departure: "18:35", duration: 90, name: "Costco ひたちなか倉庫店", address: "茨城県ひたちなか市新光町41-2", tags: ["晚餐/補給"], description: "大型美式賣場。採買旅程所需的零食、水果與飲料。晚餐可於此解決或外帶壽司。", price: "需會員卡", parking: "免費大型停車場" },
                        { type: "hotel", arrival: "19:05", name: "スーパーホテル水戸", address: "茨城県水戸市泉町3-7-24", checkIn: "15:00~", description: "附設天然溫泉「千波の湯」。" }
                    ]
                },
                3: {
                    date: "2026/02/03", weekday: "週二",
                    weather: { start: { location: "水戶", temp: "8°C", condition: "晴", icon: "sun" }, end: { location: "會津若松", temp: "2°C", condition: "雪", icon: "snowflake" } },
                    schedule: [
                        { type: "start", time: "08:30", location: "飯店退房", note: "出發前往偕樂園" },
                        { type: "transport", from: "飯店", to: "偕樂園", googleMapUrl: "https://www.google.com/maps/dir/?api=1&origin=Super+Hotel+Mito&destination=Kairakuen+Ibaraki", distance: "3.5km", estTimeBase: 15, bufferPercent: 1.1, method: "開車" },
                        { type: "spot", arrival: "08:50", departure: "10:20", duration: 90, name: "偕樂園 (Kairakuen)", address: "茨城県水戸市常磐町1-3-3", mapcode: "47 130 357*31", tags: ["日本三名園", "梅花祭"], description: "【日本三名園之一】由德川齊昭公親自設計。2月初進入早開梅花季，三千株梅花齊放。推薦參觀好文亭，可俯瞰千波湖景觀。", price: "大人 300円 / 好文亭 200円", parking: "偕樂園下停車場 (500円)" },
                        { type: "transport", from: "偕樂園", to: "袋田瀑布", googleMapUrl: "https://www.google.com/maps/dir/?api=1&origin=Kairakuen+Ibaraki&destination=Fukuroda+Falls", distance: "55km", estTimeBase: 70, bufferPercent: 1.1, method: "開車 (國道118號)" },
                        { type: "spot", arrival: "11:45", departure: "14:15", duration: 150, name: "袋田瀑布 (Fukuroda Falls)", address: "茨城県久慈郡大子町袋田3-19", mapcode: "379 664 695*88", tags: ["日本三名瀑", "冰瀑"], description: "冬季壯觀景象：冰瀑。瀑布高120米，全寬73米。穿過觀瀑隧道可由多個平台近距離觀看結冰的瀑布。午餐可於周邊店家享用軍雞料理。", price: "隧道 大人 300円", parking: "收費停車場 (500円)" },
                        { type: "transport", from: "大子町", to: "蘆之牧溫泉", googleMapUrl: "https://www.google.com/maps/dir/?api=1&origin=Fukuroda+Falls&destination=Ashinomaki+Onsen+Marumine", distance: "105km", estTimeBase: 130, bufferPercent: 1.1, method: "開車", note: "進入福島山區，注意積雪與路面結冰" },
                        { type: "hotel", arrival: "16:45", name: "蘆之牧溫泉 丸峰", address: "福島県会津若松市大戸町大字芦ノ牧字下夕平1128", mapcode: "413 037 687*33", checkIn: "15:00~", description: "享譽盛名的老牌溫泉旅館，享有大川溪谷景致。晚餐為在地會席料理。" }
                    ]
                },
                4: {
                    date: "2026/02/04", weekday: "週三",
                    weather: { start: { location: "蘆之牧", temp: "-1°C", condition: "多雲時雪", icon: "cloud-snow" }, end: { location: "會津", temp: "1°C", condition: "雪", icon: "snowflake" } },
                    schedule: [
                        { type: "start", time: "10:00", location: "飯店出發", note: "今日重點：江戶與城堡" },
                        { type: "transport", from: "蘆之牧", to: "大內宿", googleMapUrl: "https://www.google.com/maps/dir/?api=1&origin=Ashinomaki+Onsen+Marumine&destination=Ouchijuku", distance: "14km", estTimeBase: 22, bufferPercent: 1.15, method: "開車" },
                        { type: "spot", arrival: "10:25", departure: "12:55", duration: 150, name: "大內宿 (Ouchijuku)", address: "福島県南会津郡下郷町大字大内", mapcode: "433 524 624*33", tags: ["茅葺屋", "大蔥蕎麥麵"], description: "保留江戶時代驛站風貌的傳統建築保存區。冬季厚重的積雪蓋在茅草屋頂上如同薑餅屋。午餐必吃「大蔥蕎麥麵」，以一根大蔥代替筷子。一定要爬上高地拍全景照。", price: "免費入村", parking: "村外停車場 (500円)" },
                        { type: "transport", from: "大內宿", to: "會津若松城", googleMapUrl: "https://www.google.com/maps/dir/?api=1&origin=Ouchijuku&destination=Tsuruga+Castle", distance: "30km", estTimeBase: 45, bufferPercent: 1.1, method: "開車" },
                        { type: "spot", arrival: "13:45", departure: "15:15", duration: 90, name: "會津若松城 (鶴ヶ城)", address: "福島県会津若松市追手町1-1", mapcode: "97 261 460*66", tags: ["紅瓦天守", "白虎隊"], description: "東日本唯一的紅瓦天守閣。城內為歷史博物館，詳細解說幕末戰爭。冬季城堡被雪覆蓋顯得格外莊嚴。麟閣茶室是千利休之子所建。", price: "天守閣 大人 410円", parking: "西出丸停車場" },
                        { type: "transport", from: "鶴城", to: "螺旋堂", distance: "2.5km", estTimeBase: 10, method: "開車" },
                        { type: "spot", arrival: "15:30", departure: "16:10", duration: 40, name: "會津螺旋堂 (Sazaedo)", address: "福島県會津若松市一箕町八幡弁天下1404", mapcode: "97 293 845*22", tags: ["雙螺旋結構", "國指定重要文化財"], description: "建於1796年，是世界罕見的木造雙螺旋建築。上下樓走不同路徑，旅人不會相撞。內部構造神似海螺，工藝技術極高。", price: "大人 400円", parking: "飯盛山觀光停車場" },
                        { type: "hotel", arrival: "16:25", name: "東山 Park Hotel 新風月", address: "福島県会津若松市東山町大字湯本積り67", checkIn: "15:00~", description: "福島著名東山溫泉。環境清幽，大浴場泉質極佳。" }
                    ]
                },
                5: {
                    date: "2026/02/05", weekday: "週四",
                    weather: { start: { location: "東山溫泉", temp: "0°C", condition: "雪", icon: "cloud-snow" }, end: { location: "裏磐梯", temp: "-2°C", condition: "雪", icon: "snowflake" } },
                    schedule: [
                        { type: "start", time: "09:30", location: "飯店退房", note: "深度探訪裏磐梯" },
                        { type: "transport", from: "會津", to: "天鏡閣", googleMapUrl: "https://www.google.com/maps/dir/?api=1&origin=Higashiyama+Park+Hotel+Shinpugetsu&destination=Tenkyokaku", distance: "16km", estTimeBase: 30, bufferPercent: 1.3, method: "開車" },
                        { type: "spot", arrival: "10:10", departure: "11:40", duration: 90, name: "豬苗代湖 / 天鏡閣", address: "福島県耶麻郡猪苗代町大字翁沢字御殿山1048", mapcode: "161 026 587*55", tags: ["皇室別邸", "天鵝湖"], description: "天鏡閣原為有栖川宮親王別邸，白色明治西洋風格在雪中極美。冬季可遠眺豬苗代湖，湖面常有西伯利亞飛來的天鵝群。", price: "大人 370円", parking: "免費停車場" },
                        { type: "transport", from: "天鏡閣", to: "餐廳", googleMapUrl: "https://www.google.com/maps/dir/?api=1&origin=天鏡閣&destination=くいものやラ・ネージュ", distance: "5km", estTimeBase: 10, method: "開車" },
                        { type: "spot", arrival: "11:55", departure: "12:55", duration: 60, name: "くいものや ラ·ネージュ (午餐)", tags: ["手打蕎麥", "洋館餐廳"], description: "位於可愛洋房內的蕎麥麵店。推薦：天婦羅蕎麥麵。冬季在暖爐旁享用熱騰騰的蕎麥麵是一大享受。", price: "約 1500円" },
                        { type: "transport", from: "午餐", to: "五色沼", distance: "15km", estTimeBase: 25, method: "開車" },
                        { type: "spot", arrival: "13:25", departure: "15:55", duration: 150, name: "五色沼 (雪地健行)", address: "北塩原村裏磐梯遊客中心", mapcode: "413 565 645*60", tags: ["雪鞋健行", "夢幻五色"], description: "冬季是裏磐梯最安靜神祕的季節。建議至遊客中心租借雪鞋(Snowshoes)，前往毘沙門沼，水面在雪景映襯下呈現神祕的藍色。健行約需2小時。", price: "免費", parking: "遊客中心停車場" },
                        { type: "transport", from: "山區", to: "唐吉訶德", distance: "25km", estTimeBase: 45, method: "開車" },
                        { type: "spot", arrival: "16:50", departure: "17:50", duration: 60, name: "MEGA唐吉訶德 會津若松店", tags: ["免稅購物"], description: "最後補給福島伴手禮、藥妝與零食。這是該區最大的店鋪，品項極其豐富。", price: "依消費" },
                        { type: "hotel", arrival: "18:10", name: "東山新風月 (續住)", note: "回飯店享用晚餐與溫泉" }
                    ]
                },
                6: {
                    date: "2026/02/06", weekday: "週五",
                    weather: { start: { location: "會津", temp: "-1°C", condition: "雪", icon: "snowflake" }, end: { location: "那須", temp: "0°C", condition: "晴", icon: "sun" } },
                    schedule: [
                        { type: "start", time: "09:30", location: "辦理退房", note: "前往那須動物世界" },
                        { type: "transport", from: "會津", to: "那須", googleMapUrl: "https://www.google.com/maps/dir/?api=1&origin=Higashiyama+Park+Hotel+Shinpugetsu&destination=Nasu+Animal+Kingdom", distance: "60km", estTimeBase: 95, bufferPercent: 1.25, method: "開車" },
                        { type: "spot", arrival: "11:30", departure: "15:30", duration: 240, name: "那須動物王國", address: "栃木県那須郡那須町大島1042-1", tags: ["水豚", "室內秀場"], description: "冬季僅開放「Town」區域，所有動物都在溫暖的室內。必看：水豚泡柚子溫泉、西藏兔猻、與精彩的貓咪飛行秀。午餐建議在園內 Yamaneko 餐廳解決。", price: "大人 1600円", parking: "1000円" },
                        { type: "transport", from: "那須", to: "Beisia超市", googleMapUrl: "https://www.google.com/maps/dir/?api=1&origin=Nasu+Animal+Kingdom&destination=Beisia+Imaichi+Mall", distance: "50km", estTimeBase: 65, method: "開車" },
                        { type: "spot", arrival: "16:50", departure: "17:35", duration: 45, name: "Beisia 今市 Mall 店", address: "栃木県日光市芹沼1470", tags: ["兩天份食材"], description: "規模龐大的超市。採買在 Villa 兩晚所需的火鍋食材、飲料與宵夜。", price: "依消費" },
                        { type: "hotel", arrival: "18:00", name: "Rakuten STAY VILLA 鬼怒川", address: "栃木県日光市鬼怒川温泉大原306-3", tags: ["私人桑拿"], description: "自助入住民宿。享受獨棟別墅空間。房內配有桑拿與露天風呂。自炊晚餐時間。" }
                    ]
                },
                7: {
                    date: "2026/02/07", weekday: "週六",
                    weather: { start: { location: "鬼怒川", temp: "3°C", condition: "晴", icon: "sun" }, end: { location: "日光", temp: "2°C", condition: "多雲", icon: "cloud" } },
                    schedule: [
                        { type: "start", time: "09:30", location: "別墅出發", note: "日光世界遺產精華" },
                        { type: "transport", from: "鬼怒川", to: "東照宮", distance: "15km", estTimeBase: 30, method: "開車" },
                        { type: "spot", arrival: "10:10", departure: "14:10", duration: 240, name: "日光二社一寺", address: "栃木県日光市山內2301", tags: ["國寶", "世界遺產"], description: "【東照宮】江戶工藝頂峰，三猿、眠貓、陽明門。【二荒山神社】日光山主祭，祈求緣份。【輪王寺】三佛堂必看。建議在此步行區域待滿四小時，沈浸於莊嚴氛圍中。", price: "各點購票", parking: "東照宮大停車場 (600円)" },
                        { type: "transport", from: "景點", to: "AEON購物", distance: "10km", estTimeBase: 20, method: "開車" },
                        { type: "spot", arrival: "14:35", departure: "15:35", duration: 60, name: "AEON / Uniqlo 今市店", address: "栃木県日光市豊田79-1", tags: ["衣服補給"], description: "相鄰的大型購物中心。可快速買齊發熱衣或補給新鮮食材。", price: "依消費" },
                        { type: "spot", arrival: "16:00", departure: "17:30", duration: 90, name: "鬼怒川 散步規劃", address: "飯店周邊", tags: ["步行路線"], description: "從別墅出發，步行至鬼怒楯岩大吊橋欣賞溪谷冬季落羽。再走至車站前免費足湯，暖和雙腳後步行回飯店。路線輕鬆無負擔。", price: "免費" },
                        { type: "hotel", arrival: "17:30", name: "Rakuten STAY VILLA", note: "續住" }
                    ]
                },
                8: {
                    date: "2026/02/08", weekday: "週日",
                    weather: { start: { location: "奧日光", temp: "-2°C", condition: "雪", icon: "snowflake" }, end: { location: "宇都宮", temp: "5°C", condition: "晴", icon: "sun" } },
                    schedule: [
                        { type: "start", time: "09:30", location: "辦理退房", note: "往中禪寺湖攻頂" },
                        { type: "transport", from: "鬼怒川", to: "華嚴瀑布", distance: "35km", estTimeBase: 50, bufferPercent: 1.3, method: "開車 (伊呂波坂)" },
                        { type: "spot", arrival: "10:35", departure: "11:35", duration: 60, name: "華嚴瀑布", address: "栃木県日光市中宮祠", mapcode: "367 240 404*73", tags: ["三大名瀑", "觀瀑電梯"], description: "中禪寺湖水傾瀉而下，高97米。冬季細流結成藍色冰柱。搭乘電梯至瀑布底部觀景台極為震撼。", price: "電梯 570円", parking: "縣營停車場 (320円)" },
                        { type: "spot", arrival: "11:45", departure: "12:45", duration: 60, name: "Tonkatsu Asai (午餐)", address: "栃木県日光市中宮祠2478", tags: ["炸豬排"], description: "排隊名店，座位極少(6席)。豬排份量驚人、口感軟嫩。建議抵達後先行確認排隊狀況。", price: "約 1200円" },
                        { type: "transport", from: "湖畔", to: "滑雪場", distance: "12km", estTimeBase: 25, method: "開車" },
                        { type: "spot", arrival: "13:15", departure: "15:15", duration: 120, name: "日光湯元溫泉滑雪場", address: "栃木県日光市湯元", tags: ["戲雪體驗"], description: "適合全家人的滑雪場。雪質極佳。設有兒童雪盆專區。可在此輕鬆體驗雪地活動兩小時。", price: "戲雪免費", parking: "免費" },
                        { type: "spot", arrival: "15:40", departure: "16:40", duration: 60, name: "日光山中禪寺 (立木觀音)", address: "栃木県日光市中宮祠2578", tags: ["古木雕刻"], description: "供奉立木觀音。從五大堂平台可以一覽中禪寺湖冬季壯闊美景。氛圍靜謐莊嚴。", price: "500円" },
                        { type: "transport", from: "日光", to: "宇都宮", distance: "55km", estTimeBase: 70, method: "開車" },
                        { type: "hotel", arrival: "18:05", name: "東橫INN 宇都宮站前1", address: "栃木県宇都宮市駅前通り1-4-29", tags: ["宇都宮餃子"] }
                    ]
                },
                9: {
                    date: "2026/02/09", weekday: "週一",
                    weather: { start: { location: "宇都宮", temp: "10°C", condition: "晴", icon: "sun" }, end: { location: "佐野", temp: "11°C", condition: "晴", icon: "sun" } },
                    schedule: [
                        { type: "start", time: "09:00", location: "飯店退房", note: "宇都宮地下文化" },
                        { type: "transport", from: "宇都宮", to: "資料館", estTimeBase: 25, method: "開車" },
                        { type: "spot", arrival: "09:30", departure: "11:00", duration: 90, name: "大谷資料館", address: "栃木県宇都宮市大谷町909", mapcode: "367 552 837*33", tags: ["地下神殿", "大谷石"], description: "曾是巨大採石場，現為大型地底空間。常年恆溫8度。地底氣氛宛如古代神殿。是許多電影與MV拍攝點。", price: "800円", parking: "免費大型停車場" },
                        { type: "spot", arrival: "11:05", departure: "11:45", duration: 40, name: "平和觀音", address: "栃木県宇都宮市大谷町1174", tags: ["巨型石像"], description: "雕刻於岩壁上的27公尺高觀音像。可登後方步道俯瞰大谷全景。", price: "免費" },
                        { type: "spot", arrival: "12:15", departure: "13:15", duration: 60, name: "くら寿司 宇都宮鶴田店 (午餐)", tags: ["迴轉壽司"], price: "依消費" },
                        { type: "transport", from: "宇都宮", to: "足利", distance: "35km", estTimeBase: 65, method: "開車" },
                        { type: "spot", arrival: "14:20", departure: "15:20", duration: 60, name: "鑁阿寺 (Bannaji)", address: "栃木県足利市家富町2220", mapcode: "34 544 327*22", tags: ["國寶本堂"], description: "被護城河環繞的古老武家建築。境內巨大銀杏樹極具氣勢。", price: "免費參拜" },
                        { type: "spot", arrival: "15:35", departure: "16:20", duration: 45, name: "足利織姬神社", address: "栃木県足利市西宮町3889", mapcode: "34 573 243*55", tags: ["結緣聖地"], description: "位於半山腰的朱紅神社。可鳥瞰足利市區。非常適合欣賞黃昏景致。", price: "免費" },
                        { type: "spot", arrival: "16:50", departure: "17:50", duration: 60, name: "野村屋本店 (晚餐)", address: "栃木県佐野市相生町2819", tags: ["耳烏龍麵"], description: "佐野特色鄉土料理。耳型麵條有除厄意義。口感扎實Q彈。", price: "約 1500円" },
                        { type: "spot", arrival: "18:10", departure: "19:40", duration: 90, name: "足利花卉公園 (冬季燈飾)", address: "栃木県足利市迫間町607", mapcode: "64 513 361*34", tags: ["三大燈節"], description: "冬季夜晚「光之花庭園」利用數百萬LED模擬紫藤花季盛開，非常震撼。浪漫指數破表。", price: "大人 1300円", parking: "免費大型停車場" },
                        { type: "hotel", arrival: "20:00", name: "Super Hotel 佐野藤岡", address: "栃木県佐野市高萩町1344-1", checkIn: "15:00~" }
                    ]
                },
                10: {
                    date: "2026/02/10", weekday: "週二",
                    weather: { start: { location: "佐野", temp: "12°C", condition: "晴", icon: "sun" }, end: { location: "成田", temp: "6°C", condition: "多雲", icon: "cloud" } },
                    schedule: [
                        { type: "start", time: "08:30", location: "飯店退房", note: "使用高速公路回成田" },
                        { type: "transport", from: "佐野", to: "新勝寺", googleMapUrl: "https://www.google.com/maps/dir/?api=1&origin=Super+Hotel+Sano+Fujioka&destination=Naritasan+Shinshoji+Temple", distance: "100km", estTimeBase: 85, bufferPercent: 1.2, method: "開車 (高速)" },
                        { type: "spot", arrival: "10:15", departure: "12:45", duration: 150, name: "成田山新勝寺 (含午餐)", address: "千葉県成田市成田1", mapcode: "137 734 336*22", tags: ["鰻魚飯", "參道散策"], description: "千年古剎。參道林立鰻魚飯老店(如川豐、駿河屋)。必看大本堂與護摩儀式。午餐建議先行抽號碼牌再參拜。", price: "免費", parking: "附近付費停車場" },
                        { type: "transport", from: "新勝寺", to: "Outlet", estTimeBase: 25, method: "開車" },
                        { type: "spot", arrival: "13:20", departure: "17:20", duration: 240, name: "酒酒井 Premium Outlets", address: "千葉県印旛郡酒々井町飯積2-4-1", mapcode: "27 733 413*55", tags: ["最後購物"], description: "成田機場旁最大Outlet。回國前最後血拚好機會。品牌多元且設有免稅櫃檯。", price: "依消費" },
                        { type: "transport", from: "Outlet", to: "還車店", estTimeBase: 20, bufferPercent: 1.5, method: "開車 (高速)" },
                        { type: "spot", arrival: "17:50", departure: "18:10", duration: 20, name: "Relax-Rent a Car (還車)", tags: ["加滿油"], description: "檢查車輛狀況，結算ETC費用。記得取走所有個人行李與垃圾。", price: "ETC結算" },
                        { type: "hotel", arrival: "18:25", name: "東橫INN 成田機場新館", tags: ["最後一晚"] }
                    ]
                },
                11: {
                    date: "2026/02/11", weekday: "週三",
                    weather: { start: { location: "成田", temp: "6°C", condition: "多雲", icon: "cloud" }, end: { location: "台北", temp: "18°C", condition: "暖", icon: "sun" } },
                    schedule: [
                        { type: "start", time: "09:00", location: "飯店出發", note: "往成田機場T1" },
                        { type: "transport", from: "飯店", to: "一航廈 (T1)", distance: "2km", estTimeBase: 15, bufferPercent: 1.5, method: "飯店免費接駁車" },
                        { type: "spot", arrival: "09:30", departure: "10:30", duration: 60, name: "Pokémon Store 成田機場店 (T1店)", address: "一航廈 4樓 南翼", tags: ["寶可夢", "限定"], description: "【注意搬遷】已由T2遷至T1。購買限定機長皮卡丘。請於此航廈完成購買再前往二航廈。", price: "依消費" },
                        { type: "transport", from: "T1", to: "T2", estTimeBase: 10, method: "機場航廈間接駁巴士", note: "虎航IT201位於二航廈" },
                        { type: "spot", arrival: "11:00", departure: "12:00", duration: 60, name: "虎航 Check-in & 午餐", address: "二航廈 3F 報到大廳", description: "虎航櫃檯完成託運。於二航4樓餐廳享用最後一餐(如謝朋殿、壽司田)。", note: "IT201 13:00起飛" },
                        { type: "transport", from: "成田", to: "桃園", estTimeBase: 240, method: "飛機 (IT201)", note: "13:00起飛 -> 16:25抵台" },
                        { type: "spot", arrival: "16:25", name: "抵達台灣", note: "Happy Ending!" }
                    ]
                }
            }), []);

            const Sidebar = ({ currentDay, setDay }) => {
                const days = Array.from({ length: 11 }, (_, i) => i + 1);
                return (
                    <div className="w-full md:w-72 bg-slate-900 text-slate-300 flex-shrink-0 sticky-sidebar overflow-y-auto z-50 shadow-xl border-r border-slate-800">
                        <div className="p-6 font-bold text-white text-xl flex items-center gap-3 border-b border-slate-800 bg-slate-900/50 backdrop-blur-sm sticky top-0 z-10">
                            <Icon name="map-pin" size={24} color="#3b82f6" /> 2026東北家族遊
                        </div>
                        <nav className="flex md:flex-col overflow-x-auto md:overflow-visible hide-scrollbar py-4 px-3 space-y-1">
                            {days.map(d => {
                                const data = daysData[d];
                                const isActive = d === currentDay;
                                return (
                                    <button key={d} onClick={() => setDay(d)}
                                        className={`flex items-center gap-3 w-full px-4 py-4 text-left whitespace-nowrap transition-all rounded-xl
                                            ${isActive ? 'bg-blue-600 text-white shadow-lg shadow-blue-900/20' : 'hover:bg-slate-800'}`}>
                                        <div className={`w-8 h-8 rounded-lg flex items-center justify-center font-mono text-xs ${isActive ? 'bg-white/20' : 'bg-slate-700'}`}>{d}</div>
                                        <div>
                                            <div className={`text-sm font-bold ${isActive ? 'text-white' : 'text-slate-100'}`}>Day {d}</div>
                                            <div className="text-[10px] opacity-60 font-mono">{data ? data.date : "TBD"}</div>
                                        </div>
                                    </button>
                                );
                            })}
                        </nav>
                    </div>
                );
            };

            const WeatherWidget = ({ start, end }) => (
                <div className="bg-white rounded-2xl p-6 shadow-sm border border-slate-100 mb-8 grid grid-cols-1 md:grid-cols-2 gap-6 items-center">
                    <div className="flex items-center gap-4">
                        <div className={`p-4 rounded-2xl ${start.condition.includes("雪") || start.condition.includes("寒") ? 'bg-blue-50 text-blue-600' : 'bg-amber-50 text-amber-600'}`}>
                            <Icon name={start.icon} size={32} />
                        </div>
                        <div>
                            <div className="text-xs font-bold text-slate-400 uppercase tracking-wider mb-1">起點：{start.location}</div>
                            <div className="text-2xl font-bold text-slate-800">{start.temp}</div>
                            <div className="text-sm font-medium text-slate-500">{start.condition}</div>
                        </div>
                    </div>
                    <div className="flex items-center gap-4 border-t md:border-t-0 md:border-l border-slate-100 pt-6 md:pt-0 md:pl-6">
                        <div className={`p-4 rounded-2xl ${end.condition.includes("雪") ? 'bg-blue-50 text-blue-600' : 'bg-sky-50 text-sky-600'}`}>
                            <Icon name={end.icon} size={32} />
                        </div>
                        <div>
                            <div className="text-xs font-bold text-slate-400 uppercase tracking-wider mb-1">終點：{end.location}</div>
                            <div className="text-2xl font-bold text-slate-800">{end.temp}</div>
                            <div className="text-sm font-medium text-slate-500">{end.condition}</div>
                        </div>
                    </div>
                </div>
            );

            const TransportCard = ({ data }) => {
                const bufferedTime = calculateBufferedTime(data.estTimeBase || 0, data.bufferPercent || 1.0);
                const isFlight = data.method.includes("飛機");
                return (
                    <div className="relative pl-14 py-4 animate-slide-up">
                        <div className="absolute left-[20px] top-1/2 -translate-y-1/2 w-3 h-3 bg-slate-300 rounded-full z-10 ring-4 ring-slate-50"></div>
                        <div className="bg-slate-100/50 rounded-2xl p-5 border border-slate-200 hover:border-blue-300 transition-all group shadow-sm">
                            <div className="flex flex-col md:flex-row justify-between items-start md:items-center gap-4">
                                <div className="flex gap-4 items-center">
                                    <div className="p-3 bg-white rounded-xl shadow-sm text-slate-600 group-hover:text-blue-600 transition-colors">
                                        <Icon name={isFlight ? "plane" : "car"} size={20} />
                                    </div>
                                    <div>
                                        <div className="text-sm font-bold text-slate-700">{data.method}</div>
                                        <div className="text-xs text-slate-400 mt-1 flex items-center gap-1 font-medium italic">
                                            {data.from} <Icon name="arrow-right" size={10} /> {data.to}
                                        </div>
                                    </div>
                                </div>
                                <div className="flex flex-col items-end w-full md:w-auto">
                                    <div className="font-mono text-xl font-bold text-slate-700">{bufferedTime} <span className="text-xs font-normal text-slate-400 tracking-wide">MINS</span></div>
                                    <div className="text-[10px] font-bold text-slate-400 flex gap-2">
                                        <span>預估 {data.estTimeBase}分</span>
                                        <span>+ {bufferedTime - data.estTimeBase}分緩衝</span>
                                    </div>
                                </div>
                                {data.googleMapUrl && (
                                    <a href={data.googleMapUrl} target="_blank" className="w-full md:w-auto text-center px-4 py-2 bg-white border border-slate-200 rounded-xl text-xs font-bold text-slate-600 hover:bg-blue-600 hover:text-white hover:border-blue-600 transition-all shadow-sm flex items-center justify-center gap-2">
                                        <Icon name="navigation" size={14} /> 導航
                                    </a>
                                )}
                            </div>
                            {data.note && <div className="mt-3 text-xs text-amber-600 bg-amber-50 px-3 py-2 rounded-lg border border-amber-100 font-medium flex items-center gap-2"><Icon name="alert-circle" size={12}/>{data.note}</div>}
                        </div>
                    </div>
                );
            };

            const SpotCard = ({ data }) => {
                const isHotel = data.type === 'hotel';
                const isStart = data.type === 'start';
                
                if (isStart) return (
                    <div className="relative pl-14 pb-8 pt-2">
                        <div className="absolute left-[15px] top-4 w-5 h-5 bg-slate-800 rounded-full z-10 border-4 border-white shadow-md"></div>
                        <div className="animate-slide-up">
                            <div className="font-mono text-2xl font-bold text-slate-800">{data.time}</div>
                            <div className="text-xl font-bold text-slate-900 mt-1">{data.location}</div>
                            <div className="text-sm text-slate-500 font-medium mt-1">{data.note}</div>
                        </div>
                    </div>
                );

                return (
                    <div className="relative pl-14 py-8 animate-slide-up">
                        <div className={`absolute left-[15px] top-12 w-5 h-5 rounded-full z-10 border-4 border-white shadow-md ${isHotel ? 'bg-indigo-600' : 'bg-emerald-500'}`}></div>
                        <div className="bg-white rounded-3xl shadow-md border border-slate-100 overflow-hidden hover:shadow-xl transition-all">
                            <div className={`h-2.5 w-full ${isHotel ? 'bg-indigo-600' : 'bg-emerald-500'}`}></div>
                            <div className="p-6 md:p-8">
                                <div className="flex flex-col md:flex-row justify-between items-start gap-4 mb-6">
                                    <div className="flex-1">
                                        <div className="flex items-center gap-4 mb-2">
                                            <span className="font-mono text-3xl font-bold text-slate-800">{data.arrival}</span>
                                            {data.departure && <span className="text-xs font-bold text-slate-400 bg-slate-100 px-3 py-1.5 rounded-full tracking-wider">停留 {data.duration}分鐘</span>}
                                        </div>
                                        <h3 className="text-2xl font-black text-slate-900 leading-tight">{data.name}</h3>
                                        {data.jpName && <div className="text-sm text-slate-400 font-bold tracking-wide mt-1 uppercase">{data.jpName}</div>}
                                    </div>
                                    {data.tags && <div className="flex gap-2 flex-wrap justify-end">{data.tags.map(tag => <span key={tag} className="px-3 py-1.5 bg-slate-50 text-slate-500 text-[10px] font-black rounded-full border border-slate-100 uppercase tracking-tighter shadow-sm">#{tag}</span>)}</div>}
                                </div>
                                <div className="grid grid-cols-1 lg:grid-cols-2 gap-8 text-sm leading-relaxed">
                                    <div className="space-y-4">
                                        <div className="p-5 bg-slate-50 rounded-2xl text-slate-600 border border-slate-100 font-medium whitespace-pre-line leading-relaxed">{data.description}</div>
                                        {data.weatherWarning && <div className="p-4 bg-red-50 text-red-600 rounded-2xl border border-red-100 flex items-start gap-3"><Icon name="thermometer-snowflake" size={18} className="mt-0.5" /><span className="font-bold">{data.weatherWarning}</span></div>}
                                    </div>
                                    <div className="space-y-4">
                                        {data.address && <div className="flex items-start gap-3 p-3 hover:bg-slate-50 rounded-xl transition-colors"><Icon name="map" size={18} className="text-slate-400 mt-1" /><div><div className="text-[10px] text-slate-400 font-bold uppercase tracking-widest mb-0.5">地址</div><span className="text-slate-600 font-medium">{data.address}</span></div></div>}
                                        {data.mapcode && <div className="flex items-center gap-3 p-3 hover:bg-slate-50 rounded-xl transition-colors"><Icon name="navigation" size={18} className="text-slate-400" /><div><div className="text-[10px] text-slate-400 font-bold uppercase tracking-widest mb-0.5">MAPCODE</div><span className="font-mono bg-slate-100 px-2 py-1 rounded text-slate-700 font-black text-base">{data.mapcode}</span></div></div>}
                                        {data.price && <div className="flex items-center gap-3 p-3 hover:bg-slate-50 rounded-xl transition-colors"><Icon name="ticket" size={18} className="text-slate-400" /><div><div className="text-[10px] text-slate-400 font-bold uppercase tracking-widest mb-0.5">預估費用</div><span className="text-slate-700 font-bold">{data.price}</span></div></div>}
                                        {data.parking && <div className="flex items-center gap-3 p-3 hover:bg-slate-50 rounded-xl transition-colors"><Icon name="parking-circle" size={18} className="text-slate-400" /><div><div className="text-[10px] text-slate-400 font-bold uppercase tracking-widest mb-0.5">停車資訊</div><span className="text-slate-700 font-bold">{data.parking}</span></div></div>}
                                        {data.note && <div className="flex items-start gap-3 p-3 bg-amber-50/50 rounded-2xl text-amber-700 border border-amber-100/50"><Icon name="info" size={18} className="mt-1" /><span className="font-bold">{data.note}</span></div>}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                );
            };

            const data = daysData[currentDay];
            const calculateBufferedTime = (baseTime, buffer) => Math.ceil(baseTime * buffer / 5) * 5;

            useEffect(() => {
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }, [currentDay]);

            if (!data) return <div className="flex items-center justify-center h-screen font-mono font-black text-slate-300">LOADING DATABASE...</div>;

            return (
                <div className="flex flex-col md:flex-row min-h-screen">
                    <Sidebar currentDay={currentDay} setDay={setCurrentDay} />
                    <main className="flex-1 p-4 md:p-12 max-w-6xl mx-auto w-full">
                        <header className="mb-12 flex flex-col md:flex-row justify-between items-start md:items-end border-b border-slate-200 pb-8 gap-6">
                            <div>
                                <h1 className="text-6xl font-black text-slate-900 tracking-tighter">Day {currentDay}</h1>
                                <div className="mt-2 flex items-center gap-3">
                                    <span className="px-3 py-1 bg-blue-100 text-blue-700 rounded-lg text-xs font-black tracking-widest uppercase">Itinerary Plan</span>
                                    <span className="w-1.5 h-1.5 bg-slate-300 rounded-full"></span>
                                    <span className="text-slate-400 font-mono text-xs font-bold">VER 2026.02.01</span>
                                </div>
                            </div>
                            <div className="text-right">
                                <div className="text-5xl font-mono text-slate-800 font-black tracking-tighter leading-none">{data.date}</div>
                                <div className="text-xl text-slate-400 font-black mt-2 tracking-widest">{data.weekday}</div>
                            </div>
                        </header>
                        
                        <WeatherWidget start={data.weather.start} end={data.weather.end} />
                        
                        <div className="relative mt-12 pb-24">
                            <div className="timeline-line"></div>
                            {data.schedule.map((item, index) => {
                                if (item.type === 'start') return <SpotCard key={index} data={item} />;
                                if (item.type === 'transport') return <TransportCard key={index} data={item} />;
                                if (item.type === 'spot' || item.type === 'hotel') return <SpotCard key={index} data={item} />;
                                return null;
                            })}
                        </div>
                        <footer className="mt-8 text-center text-slate-400 text-xs pb-12 border-t border-slate-100 pt-12 font-bold tracking-widest uppercase">
                            Family Travel 2026 • Calculated with Google Maps + 10-15% Buffer
                        </footer>
                    </main>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>

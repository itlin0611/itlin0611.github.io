<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2026東北家族旅遊 - 行程總覽</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap');
        body { font-family: 'Noto Sans TC', sans-serif; background-color: #f3f4f6; }
        .timeline-line {
            position: absolute;
            left: 24px;
            top: 40px;
            bottom: 0;
            width: 2px;
            background-color: #e5e7eb;
            z-index: 0;
        }
        .hide-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .hide-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        .animate-fade-in { animation: fadeIn 0.5s ease-out; }
        .animate-slide-up { animation: slideUp 0.5s ease-out; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes slideUp { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;
        
        const Icon = ({ name, size = 20, color = "currentColor", className = "" }) => {
            useEffect(() => {
                lucide.createIcons();
            }, [name]);
            return <i data-lucide={name} width={size} height={size} stroke={color} className={className}></i>;
        };

        // --- DATA DEFINITIONS ---

        const day1Data = {
            date: "2026/02/01",
            weekday: "週日",
            weather: {
                start: { location: "桃園", temp: "19°C", condition: "多雲", icon: "cloud" },
                end: { location: "成田", temp: "5°C / 0°C", condition: "晴", icon: "moon" }
            },
            schedule: [
                {
                    type: "start",
                    time: "09:00",
                    location: "台中市南區",
                    note: "工學路15巷8號出發，檢查護照、駕照譯本"
                },
                {
                    type: "transport",
                    from: "台中南區",
                    to: "Q幼鮮 Qyoushian 大園店",
                    googleMapUrl: "https://www.google.com/maps/dir/?api=1&origin=Taichung+South+District&destination=Q幼鮮+大園店",
                    distance: "145 km",
                    estTimeBase: 100,
                    bufferPercent: 1.2,
                    method: "開車 (國道1號/3號)",
                    note: "前往桃園大園區午餐"
                },
                {
                    type: "spot",
                    arrival: "11:00",
                    departure: "12:30",
                    duration: 90,
                    name: "Q幼鮮 Qyoushian 大園店",
                    jpName: "Q幼鮮 (海鮮熱炒)",
                    address: "桃園市大園區中正東路203號",
                    phone: "03-386-7308",
                    tags: ["鮮魚湯", "熱炒合菜", "好停車"],
                    description: "【推薦 10 人合菜】\n位於大園交流道附近，交通便利。招牌是現煮鮮魚湯與各式熱炒料理 (滷肉飯無限供應)。店內有大圓桌，非常適合出國前的家族聚餐。食材新鮮，價格實惠。",
                    price: "約 3000-4000元/桌",
                    parking: "店前專屬停車場",
                    note: "建議提前電話預約"
                },
                {
                    type: "transport",
                    from: "Q幼鮮 Qyoushian",
                    to: "日月亭停車場",
                    googleMapUrl: "https://www.google.com/maps/dir/?api=1&origin=Q幼鮮+大園店&destination=Riyueting+Parking",
                    distance: "3.5 km",
                    estTimeBase: 8,
                    bufferPercent: 1.5,
                    method: "開車",
                    note: "前往機場外圍停車場"
                },
                {
                    type: "spot",
                    arrival: "12:45",
                    departure: "13:00",
                    duration: 15,
                    name: "日月亭停車場 (機場停車)",
                    jpName: "Airport Parking",
                    address: "桃園市大園區平安路15號 (預估)",
                    phone: "03-383-6688",
                    tags: ["停車", "接駁"],
                    description: "辦理停車手續，卸下行李。搭乘停車場接駁車前往桃園機場第一航廈。",
                    price: "信用卡優惠/自費",
                    parking: "日月亭",
                    note: "請務必再次確認車內貴重物品已取出"
                },
                {
                    type: "transport",
                    from: "日月亭停車場",
                    to: "桃園機場 第一航廈",
                    distance: "3 km",
                    estTimeBase: 10,
                    bufferPercent: 1.2,
                    method: "停車場接駁車"
                },
                {
                    type: "spot",
                    arrival: "13:10",
                    departure: "15:35",
                    duration: 145,
                    name: "桃園機場 第一航廈 (T1)",
                    jpName: "Taoyuan Airport T1",
                    address: "虎航櫃台",
                    phone: "+886-3-273-5081",
                    tags: ["報到", "出境"],
                    description: "1. 辦理台灣虎航 (Tigerair) 登機與託運手續 (通常於起飛前 2.5 小時開櫃)。\n2. 安檢、證照查驗。\n3. 免稅店逛街或前往登機門候機。",
                    price: "-",
                    parking: "-",
                    note: "IT202 預計 15:35 起飛"
                },
                {
                    type: "transport",
                    from: "桃園機場 (TPE)",
                    to: "成田機場 (NRT)",
                    distance: "2100 km",
                    estTimeBase: 180,
                    bufferPercent: 1.0,
                    method: "飛機 (Tigerair IT202)",
                    note: "15:35 TPE T1 起飛 -> 19:35 NRT T2 抵達 (日本時間)"
                },
                {
                    type: "spot",
                    arrival: "19:35",
                    departure: "20:30",
                    duration: 55,
                    name: "成田機場 第二航廈 (T2)",
                    jpName: "Narita Airport T2",
                    address: "入境大廳",
                    phone: "+81-476-34-8000",
                    tags: ["入境", "VJW"],
                    description: "抵達日本 (時差+1小時)。\n依序辦理：檢疫 -> 入境審查 (出示 Visit Japan Web QR Code) -> 提領行李 -> 海關申報。",
                    price: "-",
                    parking: "-",
                    note: "虎航停靠 T2。出關後請前往 1 樓外面的巴士站。"
                },
                {
                    type: "transport",
                    from: "成田機場 T2",
                    to: "東橫INN 成田機場新館",
                    distance: "1.5 km",
                    estTimeBase: 15,
                    bufferPercent: 1.5,
                    method: "飯店免費接駁車",
                    note: "乘車處：第二航廈 1樓 「31-B」站牌"
                },
                {
                    type: "hotel",
                    arrival: "20:50",
                    name: "東橫INN 成田機場新館",
                    jpName: "東横INN成田空港新館",
                    address: "千葉県成田市取香 560",
                    phone: "+81-476-33-1045",
                    checkIn: "15:00~",
                    description: "【接駁車資訊】\n飯店接駁車在 T2 的乘車處通常為「31-B」。晚上班次密集 (約 20 分鐘一班)。\n巴士外觀為藍色/白色，寫有 Toyoko Inn 字樣。\n\n抵達飯店後辦理 Check-in。晚餐可利用飯店 1 樓的 Lawson 便利商店。",
                    price: "依預訂",
                    parking: "-",
                    note: "好好休息，準備明天取車"
                }
            ]
        };

        const day2Data = {
            date: "2026/02/02",
            weekday: "週一",
            weather: {
                start: { location: "成田市", temp: "9°C / 1°C", condition: "晴時多雲", icon: "sun" },
                end: { location: "水戶市", temp: "8°C / 0°C", condition: "多雲", icon: "cloud" }
            },
            schedule: [
                {
                    type: "start",
                    time: "08:45",
                    location: "東橫INN 成田機場新館",
                    note: "辦理退房，搭乘接駁車或計程車前往租車點 (預抓15分移動)"
                },
                {
                    type: "transport",
                    from: "東橫INN",
                    to: "Relax-Rent a Car",
                    googleMapUrl: "https://www.google.com/maps/dir/?api=1&origin=Toyoko+Inn+Narita+Airport+Shinkan&destination=Relax+International+Car+Rental+Narita",
                    distance: "1.2 km",
                    estTimeBase: 5,
                    bufferPercent: 2.0, 
                    method: "飯店接駁 / 計程車",
                    note: "請確認飯店接駁車時刻表，或直接搭計程車"
                },
                {
                    type: "spot",
                    arrival: "09:00",
                    departure: "09:40",
                    duration: 40,
                    name: "Relax-Rent a Car レンタカー",
                    jpName: "Relax International Rental Car",
                    address: "千葉県成田市新田90-1",
                    phone: "+81-476-37-5589",
                    tags: ["租車", "取車"],
                    description: "辦理取車手續。\n請準備：護照、台灣駕照、日文譯本。\n檢查車況（外觀刮痕、輪胎、油量）。確認 ETC 卡是否已插入。",
                    price: "依預約單",
                    parking: "店鋪內",
                    note: "早晨成田周邊交通可能稍繁忙"
                },
                {
                    type: "transport",
                    from: "Relax-Rent a Car",
                    to: "かに弥 (Kaniya)",
                    googleMapUrl: "https://www.google.com/maps/dir/?api=1&origin=Relax+International+Car+Rental+Narita&destination=Kaniya+Oarai&avoid=t",
                    distance: "75 km",
                    estTimeBase: 120,
                    bufferPercent: 1.1,
                    method: "開車 (一般道路 - 國道51號)",
                    note: "不走高速公路，沿國道51號行駛。車程較長，請注意沿途休息站。"
                },
                {
                    type: "spot",
                    arrival: "11:50",
                    departure: "12:50",
                    duration: 60,
                    name: "かに弥 (Kaniya)",
                    jpName: "かに弥",
                    address: "茨城県東茨城郡大洗町磯浜町8253-22",
                    phone: "+81-29-267-2708",
                    mapcode: "239 535 733*17",
                    tags: ["午餐", "螃蟹料理", "大洗海鮮市場"],
                    description: "位於大洗海鮮市場旁的螃蟹專賣食堂。以實惠價格提供螃蟹味噌湯、螃蟹飯等料理。亦可在一樓市場挑選海鮮。",
                    price: "約 1000-2000円",
                    parking: "市場免費停車場",
                    note: "營業時間 09:00-16:00 (週三休)"
                },
                {
                    type: "transport",
                    from: "かに弥",
                    to: "大洗磯前神社 神磯鳥居",
                    googleMapUrl: "https://www.google.com/maps/dir/?api=1&origin=Kaniya+Oarai&destination=Kamiiso+no+Torii",
                    distance: "2.5 km",
                    estTimeBase: 6,
                    bufferPercent: 1.5,
                    method: "開車",
                    note: "距離很近，沿海邊道路行駛"
                },
                {
                    type: "spot",
                    arrival: "13:00",
                    departure: "13:30",
                    duration: 30,
                    name: "大洗磯前神社 神磯鳥居",
                    jpName: "大洗磯前神社 神磯の鳥居",
                    address: "茨城県東茨城郡大洗町磯浜町6890",
                    phone: "+81-29-267-2637",
                    mapcode: "239 536 575*06",
                    tags: ["海上鳥居", "絕景", "少女與戰車"],
                    description: "【神磯鳥居】矗立於太平洋岩礁上的白色鳥居。波濤洶湧的海浪拍打著鳥居，景象莊嚴。\n【大洗磯前神社】位於對面小山丘上，以保佑全家安全、生意興隆聞名。也是動畫《少女與戰車》的聖地。",
                    price: "免費參拜",
                    parking: "大洗公園停車場 (免費) 或 神社停車場",
                    weatherWarning: "海邊風大，注意保暖"
                },
                {
                    type: "transport",
                    from: "神磯鳥居",
                    to: "大洗水族館",
                    googleMapUrl: "https://www.google.com/maps/dir/?api=1&origin=Kamiiso+no+Torii&destination=Aqua+World+Oarai",
                    distance: "1.8 km",
                    estTimeBase: 5,
                    bufferPercent: 1.2,
                    method: "開車"
                },
                {
                    type: "spot",
                    arrival: "13:40",
                    departure: "16:00",
                    duration: 140,
                    name: "大洗水族館 Aqua World",
                    jpName: "アクアワールド茨城県大洗水族館",
                    address: "茨城県東茨城郡大洗町磯浜町8252-3",
                    phone: "+81-29-267-5151",
                    mapcode: "239 567 493*33",
                    tags: ["日本第一鯊魚", "翻車魚", "海豚秀"],
                    description: "關東最大規模水族館之一。\n1. 鯊魚展示數量日本第一 (約50種)。\n2. 擁有全日本最大的專用魚缸飼養翻車魚 (Manbo)。\n3. 海豚海獅表演 (請確認入場時的表演時刻表)。",
                    price: "大人 2300円 / 中小學生 1100円",
                    parking: "免費停車場 (750台)",
                    note: "停留至 16:00 閉館前夕"
                },
                {
                    type: "transport",
                    from: "大洗水族館",
                    to: "Montbell Hitachinaka",
                    googleMapUrl: "https://www.google.com/maps/dir/?api=1&origin=Aqua+World+Oarai&destination=Montbell+Hitachinaka",
                    distance: "5 km",
                    estTimeBase: 10,
                    bufferPercent: 1.5,
                    method: "開車",
                    note: "前往 Fashion Cruise 購物區"
                },
                {
                    type: "spot",
                    arrival: "16:15",
                    departure: "17:00",
                    duration: 45,
                    name: "Montbell ひたちなか店",
                    jpName: "モンベル ひたちなか店",
                    address: "茨城県ひたちなか市新光町35 (Fashion Cruise旁)",
                    phone: "+81-29-264-2300",
                    tags: ["戶外用品", "購物", "免稅"],
                    description: "位於大型購物中心區域的獨立店鋪。擁有兩層樓的寬敞賣場，商品齊全。適合補給接下來幾天前往雪地所需的裝備 (手套、帽子、發熱衣)。",
                    price: "依消費",
                    parking: "共用大型免費停車場",
                    note: "營業時間 10:00-20:00"
                },
                {
                    type: "transport",
                    from: "Montbell",
                    to: "Costco Hitachinaka",
                    googleMapUrl: "https://www.google.com/maps/dir/?api=1&origin=Montbell+Hitachinaka&destination=Costco+Wholesale+Hitachinaka",
                    distance: "0.5 km",
                    estTimeBase: 3,
                    bufferPercent: 1.5,
                    method: "開車",
                    note: "就在隔壁，車程極短"
                },
                {
                    type: "spot",
                    arrival: "17:05",
                    departure: "18:35",
                    duration: 90,
                    name: "Costco Hitachinaka",
                    jpName: "コストコホールセール ひたちなか倉庫店",
                    address: "茨城県ひたちなか市新光町41-2",
                    phone: "+81-570-200-800",
                    tags: ["超市", "補給", "晚餐"],
                    description: "大型美式賣場。建議在此採買旅程所需的飲料、零食、水果。晚餐可直接在熟食區解決 (熱狗、披薩) 或購買壽司回飯店。",
                    price: "會員制 (需會員卡)",
                    parking: "免費停車場 (858台)",
                    note: "營業時間 10:00-20:00"
                },
                {
                    type: "transport",
                    from: "Costco",
                    to: "Super Hotel Mito",
                    googleMapUrl: "https://www.google.com/maps/dir/?api=1&origin=Costco+Wholesale+Hitachinaka&destination=Super+Hotel+Mito",
                    distance: "11 km",
                    estTimeBase: 22,
                    bufferPercent: 1.2,
                    method: "開車",
                    note: "返回水戶市區"
                },
                {
                    type: "hotel",
                    arrival: "19:05",
                    name: "スーパーホテル水戸 (Super Hotel)",
                    jpName: "スーパーホテル水戸",
                    address: "茨城県水戸市泉町3-7-24",
                    phone: "+81-29-226-9000",
                    mapcode: "47 131 350*52",
                    checkIn: "15:00~",
                    description: "連鎖商務飯店，含天然溫泉「千波の湯」。",
                    price: "已預訂",
                    parking: "收費停車場 (先到先停)",
                    note: "辦理 Check-in，休息"
                }
            ]
        };

        const day3Data = {
            date: "2026/02/03",
            weekday: "週二",
            weather: {
                start: { location: "水戶市", temp: "8.5°C / -1.2°C", condition: "晴時多雲", icon: "sun" },
                end: { location: "會津若松", temp: "2.8°C / -3.5°C", condition: "雪 (強風注意)", icon: "snowflake" }
            },
            schedule: [
                {
                    type: "start",
                    time: "08:30",
                    location: "スーパーホテル水戸 (Super Hotel Mito)",
                    note: "辦理退房，確認行李上車"
                },
                {
                    type: "transport",
                    from: "スーパーホテル水戸",
                    to: "偕樂園",
                    googleMapUrl: "https://www.google.com/maps/dir/?api=1&origin=Super+Hotel+Mito&destination=Kairakuen+Ibaraki",
                    distance: "3.5 km",
                    estTimeBase: 15,
                    bufferPercent: 1.1,
                    method: "開車"
                },
                {
                    type: "spot",
                    arrival: "08:50",
                    departure: "10:20",
                    duration: 90,
                    name: "偕樂園 (Kairakuen)",
                    jpName: "偕楽園",
                    address: "茨城県水戸市常磐町1-3-3",
                    phone: "+81-29-244-5454",
                    mapcode: "47 130 357*31",
                    tags: ["日本三名園", "梅花祭", "好文亭"],
                    description: "【日本三名園之一】與金澤兼六園、岡山後樂園並列。由水戶藩第九代藩主德川齊昭公親自設計，意在與民同樂。\n\n● 必看重點：\n1. 梅林：園內種植約100種、3000株梅花。2月初為「早開梅」賞期，紅白梅花交錯，香氣撲鼻。\n2. 好文亭 (需另付費200円)：木造的三層樓建築，可從三樓俯瞰千波湖與整片梅林，視野極佳。\n3. 孟宗竹林：高聳入雲的綠色竹林，營造出幽靜禪意，與梅林的熱鬧形成對比。",
                    price: "入園 300円 / 好文亭 200円",
                    parking: "偕樂園下駐車場 (500円)",
                    weatherWarning: "戶外空曠風大，請務必戴帽子與圍巾保暖。"
                },
                {
                    type: "transport",
                    from: "偕樂園",
                    to: "袋田瀑布",
                    googleMapUrl: "https://www.google.com/maps/dir/?api=1&origin=Kairakuen+Ibaraki&destination=Fukuroda+Falls",
                    distance: "55 km",
                    estTimeBase: 70, 
                    bufferPercent: 1.1, 
                    method: "開車 (國道118號)",
                    note: "路程稍長，建議使用洗手間後出發"
                },
                {
                    type: "spot",
                    arrival: "11:45",
                    departure: "14:15",
                    duration: 150,
                    name: "袋田瀑布 (Fukuroda Falls)",
                    jpName: "袋田の滝",
                    address: "茨城県久慈郡大子町袋田3-19",
                    phone: "+81-295-72-4036",
                    mapcode: "379 664 695*88",
                    tags: ["日本三名瀑", "冰瀑", "戀人聖地"],
                    description: "【日本三名瀑之一】高120公尺、寬73公尺，瀑布水流分四段落下，故又名「四度之瀧」。\n\n● 冬季限定絕景 - 冰瀑 (Hyobaku)：\n嚴冬時期 (1-2月)，整座瀑布會因低溫而結凍，形成壯觀的白色冰壁。若運氣好遇到完全結冰，甚至能看到攀冰愛好者在瀑布上攀爬。\n\n● 參觀動線：\n需購票進入觀瀑隧道，隧道內有兩處觀景台。第一觀景台可近距離仰望瀑布，第二觀景台需搭乘電梯上去，可俯瞰瀑布全貌與愛心形狀的觀景台。",
                    price: "隧道利用料 大人300円 / 兒童150円",
                    parking: "町營免費停車場 (步行約10-15分) 或 私人收費停車場 (500円, 較近)",
                    weatherWarning: "山區氣溫極低，地面與隧道口易結冰，請穿著防滑鞋。"
                },
                {
                    type: "transport",
                    from: "袋田瀑布",
                    to: "蘆之牧溫泉 丸峰",
                    googleMapUrl: "https://www.google.com/maps/dir/?api=1&origin=Fukuroda+Falls&destination=Ashinomaki+Onsen+Marumine",
                    distance: "105 km",
                    estTimeBase: 130, 
                    bufferPercent: 1.1, 
                    method: "開車 (國道118號 -> 121號)",
                    note: "進入會津山區，高機率積雪/路面凍結，務必配置雪胎，小心駕駛"
                },
                {
                    type: "hotel",
                    arrival: "16:45",
                    name: "蘆之牧溫泉 丸峰 (Marumine)",
                    jpName: "芦ノ牧温泉 丸峰",
                    address: "福島県會津若松市大戸町大字芦ノ牧字下夕平1128",
                    phone: "+81-242-92-2121",
                    mapcode: "413 037 687*33",
                    checkIn: "15:00~",
                    description: "位於溪谷旁的溫泉旅館。擁有檜木露天風呂。晚餐為會席料理。",
                    price: "已預訂 (請確認訂房代號)",
                    parking: "飯店專用停車場 (免費)"
                }
            ]
        };

        const day4Data = {
            date: "2026/02/04",
            weekday: "週三",
            weather: {
                start: { location: "蘆之牧溫泉", temp: "-1°C / -6°C", condition: "多雲時雪", icon: "cloud-snow" },
                end: { location: "會津若松市", temp: "1°C / -4°C", condition: "雪", icon: "snowflake" }
            },
            schedule: [
                {
                    type: "start",
                    time: "10:00",
                    location: "蘆之牧溫泉 丸峰",
                    note: "享用完早餐後悠閒出發"
                },
                {
                    type: "transport",
                    from: "蘆之牧溫泉 丸峰",
                    to: "大內宿",
                    googleMapUrl: "https://www.google.com/maps/dir/?api=1&origin=Ashinomaki+Onsen+Marumine&destination=Ouchijuku",
                    distance: "14 km",
                    estTimeBase: 22, 
                    bufferPercent: 1.15,
                    method: "開車"
                },
                {
                    type: "spot",
                    arrival: "10:25",
                    departure: "12:55",
                    duration: 150,
                    name: "大內宿 (Ouchijuku)",
                    jpName: "大内宿",
                    address: "福島県南会津郡下郷町大字大内",
                    phone: "+81-241-68-3611",
                    mapcode: "433 524 624*33",
                    tags: ["茅草屋聚落", "日本三大茅葺屋", "大蔥蕎麥麵"],
                    description: "【國家重要傳統建造物群保存地區】\n與白川鄉合掌村、京都美山町並列。保留了江戶時代宿場町的風貌，街道兩旁排列著30多間茅草屋頂的民家。\n\n● 冬季亮點：\n白雪覆蓋在厚厚的茅草屋頂上，彷彿童話世界。街道盡頭的高地可以俯瞰全景，是攝影愛好者必去的拍攝點。\n\n● 午餐推薦：\n必吃名物「大蔥蕎麥麵」(Negi-soba)。特色是用一整根長蔥當作筷子撈麵吃，吃的時候可以咬一口蔥配麵，嗆辣鮮甜。",
                    price: "免費入村",
                    parking: "收費停車場 (500円)",
                    weatherWarning: "地面可能非常滑，建議穿著雪靴或冰爪。"
                },
                {
                    type: "transport",
                    from: "大內宿",
                    to: "會津若松城 (鶴ヶ城)",
                    googleMapUrl: "https://www.google.com/maps/dir/?api=1&origin=Ouchijuku&destination=Tsuruga+Castle",
                    distance: "30 km",
                    estTimeBase: 45, 
                    bufferPercent: 1.1, 
                    method: "開車"
                },
                {
                    type: "spot",
                    arrival: "13:45",
                    departure: "15:15",
                    duration: 90,
                    name: "會津若松城 / 鶴城 (Tsuruga Castle)",
                    jpName: "会津若松城 / 鶴ヶ城",
                    address: "福島県會津若松市追手町1-1",
                    phone: "+81-242-27-4005",
                    mapcode: "97 261 460*66",
                    tags: ["百大名城", "紅瓦天守閣", "白虎隊"],
                    description: "【東日本唯一的紅瓦天守閣】\n這座城堡是會津若松的象徵，也是戊辰戰爭中激戰的舞台。五層樓的天守閣內部為博物館，展示會津藩的歷史文物。\n\n● 參觀重點：\n1. 紅瓦：全日本唯一使用紅瓦的天守閣，在雪地中紅色的屋瓦顯得格外醒目。\n2. 茶室「麟閣」：位於城廓內，據說是由千利休之子少庵所建。",
                    price: "天守閣入場 大人410円 / 小孩150円",
                    parking: "西出丸停車場 (200円/時)",
                    weatherWarning: "登城路面可能有殘雪"
                },
                {
                    type: "transport",
                    from: "會津若松城",
                    to: "会津さざえ堂 (螺旋堂)",
                    googleMapUrl: "https://www.google.com/maps/dir/?api=1&origin=Tsuruga+Castle&destination=Aizu+Sazaedo",
                    distance: "2.5 km",
                    estTimeBase: 10, 
                    bufferPercent: 1.2, 
                    method: "開車",
                    note: "市區短程移動，注意紅綠燈"
                },
                {
                    type: "spot",
                    arrival: "15:30", 
                    departure: "16:10",
                    duration: 40,
                    name: "會津螺旋堂 (Sazaedo)",
                    jpName: "会津さざえ堂 (円通三匝堂)",
                    address: "福島県會津若松市一箕町八幡弁天下1404",
                    phone: "+81-242-22-3163",
                    mapcode: "97 293 845*22",
                    tags: ["國家重要文化財", "雙螺旋構造", "奇異建築"],
                    description: "【世界罕見的雙螺旋木造建築】\n位於飯盛山，正式名稱為「圓通三匝堂」。\n\n● 建築奇蹟：\n雖為木造建築，但內部構造為雙螺旋樓梯。參拜者沿著斜坡往上走，回程則是另一條路往下，上下遊客完全不會相遇，是非常奇特且具巧思的設計。",
                    price: "大人 400円 / 大學生 300円 / 小孩 200円",
                    parking: "飯盛山觀光客專用停車場 (步行需爬樓梯)"
                },
                {
                    type: "transport",
                    from: "会津さざえ堂",
                    to: "東山パークホテル 新風月",
                    googleMapUrl: "https://www.google.com/maps/dir/?api=1&origin=Aizu+Sazaedo&destination=Higashiyama+Park+Hotel+Shinpugetsu",
                    distance: "3.5 km",
                    estTimeBase: 12, 
                    bufferPercent: 1.1, 
                    method: "開車"
                },
                {
                    type: "hotel",
                    arrival: "16:25",
                    name: "東山 Park Hotel 新風月",
                    jpName: "東山パークホテル 新風月",
                    address: "福島県會津若松市東山町大字湯本積り67",
                    phone: "+81-242-26-2211",
                    mapcode: "97 265 831*33",
                    checkIn: "15:00~",
                    description: "位於東山溫泉鄉，擁有自家源泉的溫泉飯店。大浴場可眺望溪谷美景。",
                    price: "一泊二食",
                    parking: "飯店專用停車場 (免費)",
                    note: "如果需要採買零食，建議在進飯店前先去超市 (如: リオン･ドール 滝沢店)"
                }
            ]
        };

        const day5Data = {
            date: "2026/02/05",
            weekday: "週四",
            weather: {
                start: { location: "東山溫泉", temp: "0°C / -5°C", condition: "多雲時雪", icon: "cloud-snow" },
                end: { location: "豬苗代/裏磐梯", temp: "-2°C / -8°C", condition: "雪", icon: "snowflake" }
            },
            schedule: [
                {
                    type: "start",
                    time: "09:30",
                    location: "東山パークホテル 新風月",
                    note: "辦理退房，出發前往豬苗代湖"
                },
                {
                    type: "transport",
                    from: "東山パークホテル 新風月",
                    to: "豬苗代湖/天鏡閣",
                    googleMapUrl: "https://www.google.com/maps/dir/?api=1&origin=Higashiyama+Park+Hotel+Shinpugetsu&destination=Tenkyokaku",
                    distance: "16 km",
                    estTimeBase: 30,
                    bufferPercent: 1.3,
                    method: "開車",
                    note: "前往豬苗代湖畔，路面可能積雪"
                },
                {
                    type: "spot",
                    arrival: "10:10",
                    departure: "11:40",
                    duration: 90,
                    name: "豬苗代湖 / 天鏡閣",
                    jpName: "天鏡閣 (Tenkyokaku)",
                    address: "福島県耶麻郡豬苗代町大字翁澤字御殿山1048",
                    phone: "+81-242-65-2811",
                    mapcode: "161 026 587*55",
                    tags: ["國家重要文化財", "皇室別邸", "明治風情"],
                    description: "【明治時代的皇室別邸】\n有栖川宮親王殿下的別邸，建築風格洋溢著明治時代的西洋風情。館內可付費試穿明治時期的華麗洋裝並在館內拍照，體驗穿越時空的感覺。\n豬苗代湖冬季有時會飛來天鵝，運氣好可在湖畔看到。",
                    price: "入館 大人 370円 / 高校生 210円 / 中小學生 100円",
                    parking: "專用停車場 (免費)",
                    note: "冬季營業時間 9:00-16:30 (最後入館16:00)"
                },
                {
                    type: "transport",
                    from: "天鏡閣",
                    to: "くいものや ラ·ネージュ",
                    googleMapUrl: "https://www.google.com/maps/dir/?api=1&origin=天鏡閣&destination=くいものやラ・ネージュ",
                    distance: "5 km",
                    estTimeBase: 10,
                    bufferPercent: 1.5,
                    method: "開車",
                    note: "短程移動前往午餐地點"
                },
                {
                    type: "spot",
                    arrival: "11:55",
                    departure: "12:55",
                    duration: 60,
                    name: "くいものや ラ·ネージュ",
                    jpName: "くいものや ラ・ネージュ",
                    address: "福島県耶麻郡豬苗代町大字城南100-1",
                    phone: "+81-242-62-5070",
                    tags: ["午餐", "手打蕎麥麵", "天婦羅"],
                    description: "豬苗代地區的人氣蕎麥麵店。建築外觀像是一棟可愛的洋房，但賣的是道地的手打蕎麥麵。\n招牌是「天婦羅蕎麥麵」，炸得酥脆的天婦羅搭配口感Q彈的蕎麥麵。",
                    price: "約 1000-2000円",
                    parking: "店鋪停車場",
                    note: "人氣店鋪，建議提早抵達或預留排隊時間"
                },
                {
                    type: "transport",
                    from: "くいものや ラ·ネージュ",
                    to: "五色沼",
                    googleMapUrl: "https://www.google.com/maps/dir/?api=1&origin=Kuimonoya+La+Neige&destination=Urabandai+Visitor+Center",
                    distance: "15 km",
                    estTimeBase: 25,
                    bufferPercent: 1.2,
                    method: "開車",
                    note: "前往裏磐梯高原，山路積雪需小心"
                },
                {
                    type: "spot",
                    arrival: "13:25",
                    departure: "15:55",
                    duration: 150,
                    name: "五色沼自然探勝路",
                    jpName: "五色沼湖沼群",
                    address: "福島県耶麻郡北塩原村 (建議導航至裏磐梯遊客中心)",
                    phone: "+81-241-32-2850",
                    mapcode: "413 565 645*60 (遊客中心)",
                    tags: ["雪地健行", "神祕藍湖", "雪鞋體驗"],
                    description: "【冬季限定的銀白世界】\n五色沼在冬季被白雪覆蓋，部分湖面結冰，呈現出與夏季截然不同的靜謐美感。\n若積雪較深，建議在「裏磐梯遊客中心」租借雪鞋 (Snowshoes) 進行健行，體驗在雪地上行走的樂趣。毘沙門沼是最大的湖泊，冬季也能欣賞到青綠色的湖水。",
                    price: "免費 (雪鞋租借另計)",
                    parking: "裏磐梯遊客中心停車場 (免費)",
                    weatherWarning: "極寒地帶，務必穿著防水保暖衣物與雪靴。"
                },
                {
                    type: "transport",
                    from: "五色沼",
                    to: "MEGA唐吉軻德",
                    googleMapUrl: "https://www.google.com/maps/dir/?api=1&origin=Urabandai+Visitor+Center&destination=MEGA+Don+Quijote+UNY+Aizuwakamatsu",
                    distance: "25 km",
                    estTimeBase: 45,
                    bufferPercent: 1.25,
                    method: "開車",
                    note: "下山返回會津若松市區"
                },
                {
                    type: "spot",
                    arrival: "16:50",
                    departure: "17:50",
                    duration: 60,
                    name: "MEGA唐吉軻德 UNY 会津若松店",
                    jpName: "MEGAドン・キホーテUNY 会津若松店",
                    address: "福島県會津若松市幕內南町9-10",
                    phone: "+81-570-076-711",
                    mapcode: "97 291 762*66",
                    tags: ["購物", "伴手禮", "免稅"],
                    description: "結合了超市的 MEGA 唐吉軻德，商品種類極為豐富。除了藥妝、電器外，也有豐富的生鮮食品與福島當地伴手禮。\n非常適合在此一次買齊所需的零食與紀念品。",
                    price: "依消費",
                    parking: "大型免費停車場 (500台以上)",
                    note: "營業時間 8:00 - 0:00"
                },
                {
                    type: "transport",
                    from: "MEGA唐吉軻德",
                    to: "東山パークホテル 新風月",
                    googleMapUrl: "https://www.google.com/maps/dir/?api=1&origin=MEGA+Don+Quijote+UNY+Aizuwakamatsu&destination=Higashiyama+Park+Hotel+Shinpugetsu",
                    distance: "5 km",
                    estTimeBase: 15,
                    bufferPercent: 1.3,
                    method: "開車",
                    note: "返回飯店晚餐"
                },
                {
                    type: "hotel",
                    arrival: "18:10",
                    name: "東山 Park Hotel 新風月",
                    jpName: "東山パークホテル 新風月",
                    address: "福島県會津若松市東山町大字湯本積り67",
                    phone: "+81-242-26-2211",
                    checkIn: "續住",
                    description: "回到飯店享用溫泉與晚餐，整理今日戰利品。",
                    price: "一泊二食",
                    parking: "飯店專用停車場"
                }
            ]
        };

        const day6Data = {
            date: "2026/02/06",
            weekday: "週五",
            weather: {
                start: { location: "會津若松", temp: "-1°C / -5°C", condition: "雪", icon: "snowflake" },
                end: { location: "那須高原", temp: "0°C / -6°C", condition: "多雲時晴", icon: "cloud-sun" }
            },
            schedule: [
                {
                    type: "start",
                    time: "09:30",
                    location: "東山パークホテル 新風月",
                    note: "辦理退房，出發前往那須 (跨縣移動)"
                },
                {
                    type: "transport",
                    from: "東山パークホテル 新風月",
                    to: "那須動物王國",
                    googleMapUrl: "https://www.google.com/maps/dir/?api=1&origin=Higashiyama+Park+Hotel+Shinpugetsu&destination=Nasu+Animal+Kingdom",
                    distance: "60 km",
                    estTimeBase: 95, 
                    bufferPercent: 1.25, 
                    method: "開車",
                    note: "行經會津下鄉與那須山區，路況變化大"
                },
                {
                    type: "spot",
                    arrival: "11:30", 
                    departure: "15:30",
                    duration: 240,
                    name: "那須動物王國",
                    jpName: "那須どうぶつ王国 (Nasu Animal Kingdom)",
                    address: "栃木県那須郡那須町大島1042-1",
                    phone: "+81-287-77-1110",
                    tags: ["水豚君", "冬季限定", "室內參觀"],
                    description: "【冬季營業注意】冬季期間通常僅開放「王國小鎮 (Town)」區域，戶外農場區域關閉。但仍可近距離觀賞水豚泡湯、兔猻、以及精彩的貓咪秀 (The Cats)。\n午餐建議於園內餐廳「Yamaneko Terrace」享用。",
                    price: "冬季票價 大人 1600円 / 兒童 900円 (預估)",
                    parking: "收費停車場 (1000円)",
                    weatherWarning: "那須高原風大體感溫度低，請做好保暖。"
                },
                {
                    type: "transport",
                    from: "那須動物王國",
                    to: "Beisia 今市 Mall 店",
                    googleMapUrl: "https://www.google.com/maps/dir/?api=1&origin=Nasu+Animal+Kingdom&destination=Beisia+Imaichi+Mall",
                    distance: "50 km",
                    estTimeBase: 65, 
                    bufferPercent: 1.2, 
                    method: "開車",
                    note: "前往鬼怒川方向，順路採買晚餐"
                },
                {
                    type: "spot",
                    arrival: "16:50", 
                    departure: "17:35",
                    duration: 45,
                    name: "Beisia 今市 Mall 店 (晚餐採買)",
                    jpName: "ベイシア今市モール店",
                    address: "栃木県日光市芹沼1470",
                    phone: "+81-288-30-1511",
                    tags: ["大型超市", "晚餐食材", "補給"],
                    description: "北關東知名的大型連鎖超市。生鮮蔬果、肉品種類豐富且價格實惠。\n建議在此採買今晚在 Villa 自炊所需的食材 (火鍋肉片、蔬菜、飲料等)。",
                    price: "依消費",
                    parking: "免費大型停車場",
                    note: "營業時間 9:00 - 20:00"
                },
                {
                    type: "transport",
                    from: "Beisia 超市",
                    to: "Rakuten STAY VILLA",
                    googleMapUrl: "https://www.google.com/maps/dir/?api=1&origin=Beisia+Imaichi+Mall&destination=Rakuten+STAY+VILLA+Kinugawa+Riverside",
                    distance: "10 km",
                    estTimeBase: 20, 
                    bufferPercent: 1.2, 
                    method: "開車",
                    note: "前往今晚住宿的獨棟別墅"
                },
                {
                    type: "hotel",
                    arrival: "18:00",
                    name: "Rakuten STAY VILLA 鬼怒川 Riverside",
                    jpName: "Rakuten STAY VILLA 鬼怒川リバーサイド",
                    address: "栃木県日光市鬼怒川溫泉大原306-3",
                    phone: "+81-50-1750-9719",
                    checkIn: "15:00~ (自助入住)",
                    description: "位於鬼怒川畔的獨棟別墅。配有私人桑拿、半露天溫泉與投影機。晚餐可使用廚房自行烹飪。",
                    price: "已預訂",
                    parking: "每棟專屬停車位 (免費)",
                    note: "採無人自助入住，請確認 Email 收到的入住代碼"
                }
            ]
        };

        const day7Data = {
            date: "2026/02/07",
            weekday: "週六",
            weather: {
                start: { location: "鬼怒川", temp: "3°C / -4°C", condition: "晴時多雲", icon: "sun" },
                end: { location: "日光市區", temp: "2°C / -5°C", condition: "多雲", icon: "cloud" }
            },
            schedule: [
                {
                    type: "start",
                    time: "09:30",
                    location: "Rakuten STAY VILLA 鬼怒川",
                    note: "早餐後出發前往日光世界遺產區"
                },
                {
                    type: "transport",
                    from: "Rakuten STAY VILLA",
                    to: "日光東照宮",
                    googleMapUrl: "https://www.google.com/maps/dir/?api=1&origin=Rakuten+STAY+VILLA+Kinugawa+Riverside&destination=Nikko+Toshogu",
                    distance: "15 km",
                    estTimeBase: 30, 
                    bufferPercent: 1.2, 
                    method: "開車",
                    note: "週末日光市區可能塞車，請提早出發"
                },
                {
                    type: "spot",
                    arrival: "10:10",
                    departure: "14:10",
                    duration: 240,
                    name: "日光二社一寺 (世界遺產巡禮)",
                    jpName: "日光東照宮 / 二荒山神社 / 輪王寺",
                    address: "栃木県日光市山內2301",
                    phone: "+81-288-54-0560",
                    tags: ["世界遺產", "國寶", "能量景點"],
                    description: "【日光東照宮】\n祭祀德川家康的神社。必看「陽明門」(日暮之門)、國寶「眠貓」與「三猿」。\n票價：大人 1300円 / 中小學生 450円。\n\n【日光二荒山神社】\n位於東照宮旁，主祀日光三山之神。以祈求結緣、家庭圓滿靈驗著稱。夫妻杉、親子杉是必看亮點。\n票價：免費參拜 (神苑另收費 300円)。\n\n【日光山輪王寺】\n日光山的總本堂「三佛堂」，供奉著三尊巨大的金佛 (千手觀音、阿彌陀如來、馬頭觀音)。\n票價：三佛堂 大人 400円。",
                    price: "建議購買共通券或個別購票",
                    parking: "東照宮大停車場 (600円/次) 或 西參道停車場",
                    weatherWarning: "參道階梯多且易結冰，請穿好走的鞋子。"
                },
                {
                    type: "transport",
                    from: "日光東照宮",
                    to: "AEON / Uniqlo 今市店",
                    googleMapUrl: "https://www.google.com/maps/dir/?api=1&origin=Nikko+Toshogu&destination=Aeon+Imaichi",
                    distance: "10 km",
                    estTimeBase: 20, 
                    bufferPercent: 1.2, 
                    method: "開車",
                    note: "返回今市市區購物"
                },
                {
                    type: "spot",
                    arrival: "14:35",
                    departure: "15:35",
                    duration: 60,
                    name: "AEON / Uniqlo 今市店 (購物)",
                    jpName: "イオン今市店 / ユニクロ 今市店",
                    address: "栃木県日光市豊田79-1",
                    phone: "+81-288-30-2000",
                    tags: ["購物", "Uniqlo", "超市"],
                    description: "位於今市的大型購物區。AEON 超市可採買生鮮食品與伴手禮，旁邊即是大型 Uniqlo 路面店，可一次滿足購物需求。",
                    price: "依消費",
                    parking: "免費大型停車場",
                    note: "可在此補給今晚與明早的食材"
                },
                {
                    type: "transport",
                    from: "AEON 今市店",
                    to: "Rakuten STAY VILLA",
                    googleMapUrl: "https://www.google.com/maps/dir/?api=1&origin=Aeon+Imaichi&destination=Rakuten+STAY+VILLA+Kinugawa+Riverside",
                    distance: "10 km",
                    estTimeBase: 20, 
                    bufferPercent: 1.1, 
                    method: "開車",
                    note: "返回別墅休息片刻"
                },
                {
                    type: "spot",
                    arrival: "16:00",
                    departure: "17:30",
                    duration: 90,
                    name: "鬼怒川溫泉 輕鬆散步",
                    jpName: "鬼怒川温泉散策 (徒歩)",
                    address: "Rakuten STAY VILLA 周邊",
                    tags: ["步行", "吊橋", "足湯"],
                    description: "【來回約 1.5 小時的悠閒散步路線】\n1. 從 Villa 出發，步行約 10 分鐘抵達「鬼怒楯岩大吊橋」。在橋上欣賞鬼怒川溪谷美景 (冬季可能風大)。\n2. 過橋後可至展望台 (視體力而定)，或直接折返前往「鬼怒川溫泉車站」。\n3. 車站前廣場有免費足湯「鬼怒太之湯」(Kinuta no Yu)，可在此泡腳暖身，並與著名的「鬼怒太」雕像合影。\n4. 沿著溫泉街漫步返回 Villa。",
                    price: "免費",
                    parking: "步行前往",
                    weatherWarning: "傍晚氣溫下降快，請攜帶外套。"
                },
                {
                    type: "hotel",
                    arrival: "17:30",
                    name: "Rakuten STAY VILLA 鬼怒川 Riverside",
                    jpName: "Rakuten STAY VILLA 鬼怒川リバーサイド",
                    address: "栃木県日光市鬼怒川溫泉大原306-3",
                    phone: "+81-50-1750-9719",
                    checkIn: "續住",
                    description: "回到舒適的別墅，享受私人桑拿或在大螢幕前放鬆。",
                    price: "已預訂",
                    parking: "專屬停車位"
                }
            ]
        };

        const day8Data = {
            date: "2026/02/08",
            weekday: "週日",
            weather: {
                start: { location: "鬼怒川/中禪寺湖", temp: "-1°C / -7°C", condition: "雪", icon: "snowflake" },
                end: { location: "宇都宮", temp: "5°C / -2°C", condition: "晴時多雲", icon: "sun" }
            },
            schedule: [
                {
                    type: "start",
                    time: "09:30",
                    location: "Rakuten STAY VILLA 鬼怒川",
                    note: "辦理退房，前往奧日光區域"
                },
                {
                    type: "transport",
                    from: "Rakuten STAY VILLA",
                    to: "華嚴瀑布",
                    googleMapUrl: "https://www.google.com/maps/dir/?api=1&origin=Rakuten+STAY+VILLA+Kinugawa+Riverside&destination=Kegon+Falls",
                    distance: "35 km",
                    estTimeBase: 50, 
                    bufferPercent: 1.3, 
                    method: "開車",
                    note: "經由伊呂波山道 (Irohazaka) 上山，可能有積雪，請小心駕駛"
                },
                {
                    type: "spot",
                    arrival: "10:35",
                    departure: "11:35",
                    duration: 60,
                    name: "華嚴瀑布 (Kegon Falls)",
                    jpName: "華厳の滝",
                    address: "栃木県日光市中宮祠",
                    phone: "+81-288-55-0030",
                    mapcode: "367 240 404*73",
                    tags: ["日本三大名瀑", "冰瀑", "觀瀑電梯"],
                    description: "【日本三大名瀑之一】\n高 97 公尺的大瀑布，中禪寺湖的湖水在此傾瀉而下。冬季時，瀑布細流會結凍成青藍色的冰柱 (Blue Ice)，與轟隆水聲形成強烈對比。\n推薦搭乘付費電梯 (往返 570円) 下降至觀瀑台，可近距離感受水花與冰柱的震撼。",
                    price: "電梯往返 大人 570円 / 小學生 340円",
                    parking: "縣營停車場 (320円/次)",
                    weatherWarning: "觀瀑台易結冰濕滑，且風勢強勁，務必注意保暖。"
                },
                {
                    type: "transport",
                    from: "華嚴瀑布",
                    to: "Tonkatsu Asai",
                    googleMapUrl: "https://www.google.com/maps/dir/?api=1&origin=Kegon+Falls&destination=Tonkatsu+Asai",
                    distance: "1 km",
                    estTimeBase: 5, 
                    bufferPercent: 2.0, 
                    method: "開車/步行",
                    note: "就在附近，建議開車前往以便後續行程"
                },
                {
                    type: "spot",
                    arrival: "11:45",
                    departure: "12:45",
                    duration: 60,
                    name: "Tonkatsu Asai (午餐)",
                    jpName: "トンカツ 浅井",
                    address: "栃木県日光市中宮祠2478",
                    phone: "+81-288-55-0014",
                    tags: ["炸豬排", "排隊名店", "大份量"],
                    description: "中禪寺湖畔的超人氣炸豬排店。雖然只有 6 個吧台座位，但因肉質鮮嫩、份量驚人且價格實惠而聞名。\n招牌是「ソースカツ丼」(醬汁豬排丼)，豬排滿到蓋不起來，視覺效果十足。",
                    price: "約 1000-1500円",
                    parking: "附近縣營停車場 (步行前往)",
                    note: "店內座位極少，可能需要排隊等候。若排隊過長，建議改至附近其他餐廳。"
                },
                {
                    type: "transport",
                    from: "Tonkatsu Asai",
                    to: "日光湯元溫泉滑雪場",
                    googleMapUrl: "https://www.google.com/maps/dir/?api=1&origin=Tonkatsu+Asai&destination=Nikko+Yumoto+Onsen+Ski+Park",
                    distance: "12 km",
                    estTimeBase: 25, 
                    bufferPercent: 1.2, 
                    method: "開車",
                    note: "深入奧日光，路面高機率積雪"
                },
                {
                    type: "spot",
                    arrival: "13:15",
                    departure: "15:15",
                    duration: 120,
                    name: "日光湯元溫泉滑雪場",
                    jpName: "日光湯元温泉スキー場",
                    address: "栃木県日光市湯元",
                    phone: "+81-288-62-2532",
                    tags: ["滑雪體驗", "雪盆", "粉雪"],
                    description: "位於奧日光深處的小型滑雪場，以優良的粉雪雪質著稱。坡度平緩，非常適合家庭遊客玩雪盆或初學者體驗滑雪。\n場內有專屬的「Kids Park」(兒童戲雪區)，可以安全地玩雪盆。",
                    price: "平日免費 / 週末假日需纜車券 (玩雪盆免費)",
                    parking: "免費停車場",
                    weatherWarning: "氣溫極低 (約 -5 度至 -10 度)，手套、毛帽、防水褲是必備。"
                },
                {
                    type: "transport",
                    from: "日光湯元溫泉滑雪場",
                    to: "日光山中禪寺",
                    googleMapUrl: "https://www.google.com/maps/dir/?api=1&origin=Nikko+Yumoto+Onsen+Ski+Park&destination=Chuzenji+Temple",
                    distance: "12 km",
                    estTimeBase: 20, 
                    bufferPercent: 1.2, 
                    method: "開車",
                    note: "原路返回中禪寺湖畔"
                },
                {
                    type: "spot",
                    arrival: "15:40",
                    departure: "16:40",
                    duration: 60,
                    name: "日光山中禪寺 (立木觀音)",
                    jpName: "日光山中禅寺 (立木観音)",
                    address: "栃木県日光市中宮祠2578",
                    phone: "+81-288-55-0013",
                    tags: ["重要文化財", "立木觀音", "湖畔古剎"],
                    description: "【世界遺產 日光山輪王寺的別院】\n供奉著「十一面千手觀音菩薩」，據說是勝道上人親手雕刻在還活著的樹木上，因此稱為「立木觀音」。\n寺院位於中禪寺湖畔的歌之濱，從五大堂可以眺望男體山與中禪寺湖的絕美景色。冬季境內靜謐莊嚴，是沈澱心靈的好地方。",
                    price: "拜觀料 大人 500円 / 中小學生 200円",
                    parking: "免費停車場",
                    note: "冬季參拜時間至 15:30 (需確認最新時間，若已關門則參觀外觀與湖景)"
                },
                {
                    type: "transport",
                    from: "日光山中禪寺",
                    to: "東橫INN 宇都宮站前1",
                    googleMapUrl: "https://www.google.com/maps/dir/?api=1&origin=Chuzenji+Temple&destination=Toyoko+Inn+Utsunomiya+Ekimae+No.1",
                    distance: "55 km",
                    estTimeBase: 70, 
                    bufferPercent: 1.2, 
                    method: "開車",
                    note: "下山經日光宇都宮道路前往宇都宮，準備明日行程"
                },
                {
                    type: "hotel",
                    arrival: "18:05",
                    name: "東橫INN 宇都宮站前1",
                    jpName: "東横INN宇都宮駅前1",
                    address: "栃木県宇都宮市駅前通り1-4-29",
                    phone: "+81-28-625-1045",
                    checkIn: "16:00~",
                    description: "位於宇都宮車站前的商務飯店。晚餐可於車站周邊享用著名的宇都宮餃子。",
                    price: "已預訂",
                    parking: "立體停車場 (500円/晚，需預約或依序)",
                    note: "晚餐推薦：宇都宮餃子館、Minmin (みんみん)"
                }
            ]
        };

        const day9Data = {
            date: "2026/02/09",
            weekday: "週一",
            weather: {
                start: { location: "宇都宮", temp: "10°C / 0°C", condition: "晴時多雲", icon: "sun" },
                end: { location: "佐野/足利", temp: "11°C / -1°C", condition: "晴", icon: "sun" }
            },
            schedule: [
                {
                    type: "start",
                    time: "09:00",
                    location: "東橫INN 宇都宮站前1",
                    note: "辦理退房，前往大谷資料館"
                },
                {
                    type: "transport",
                    from: "東橫INN",
                    to: "大谷資料館",
                    googleMapUrl: "https://www.google.com/maps/dir/?api=1&origin=Toyoko+Inn+Utsunomiya+Ekimae+No.1&destination=Oya+History+Museum",
                    distance: "8.5 km",
                    estTimeBase: 25,
                    bufferPercent: 1.2,
                    method: "開車",
                    note: "前往宇都宮市郊外"
                },
                {
                    type: "spot",
                    arrival: "09:30",
                    departure: "11:00",
                    duration: 90,
                    name: "大谷資料館 (Oya History Museum)",
                    jpName: "大谷資料館",
                    address: "栃木県宇都宮市大谷町909",
                    phone: "+81-28-652-1232",
                    mapcode: "367 552 837*33",
                    tags: ["地下神殿", "電影場景", "大谷石"],
                    description: "【潛入地底的巨大神殿】\n曾是開採「大谷石」的地下採石場，佔地廣大達 2 萬平方公尺。巨大的地下空間充滿神祕氛圍，宛如古代神殿，常被用作電影或 MV 的拍攝場景。\n館內終年均溫約 8 度，請務必攜帶外套。",
                    price: "大人 800円 / 中小學生 400円",
                    parking: "免費大型停車場",
                    weatherWarning: "坑內氣溫低，請注意保暖。"
                },
                {
                    type: "transport",
                    from: "大谷資料館",
                    to: "平和觀音",
                    googleMapUrl: "https://www.google.com/maps/dir/?api=1&origin=Oya+History+Museum&destination=Heiwa+Kannon",
                    distance: "0.5 km",
                    estTimeBase: 5,
                    bufferPercent: 1.0,
                    method: "步行/開車",
                    note: "距離很近，可步行前往"
                },
                {
                    type: "spot",
                    arrival: "11:05",
                    departure: "11:45",
                    duration: 40,
                    name: "平和觀音",
                    jpName: "平和観音",
                    address: "栃木県宇都宮市大谷町1174",
                    phone: "+81-28-652-0128",
                    tags: ["大谷石雕刻", "免費參觀"],
                    description: "戰後為了祈求世界和平，由石匠們手工雕刻在岩壁上的巨大觀音像，高達 27 公尺。可以走樓梯登上觀音像附近的展望台，俯瞰大谷地區的奇岩怪石景觀。",
                    price: "免費",
                    parking: "使用大谷公園或資料館停車場"
                },
                {
                    type: "transport",
                    from: "平和觀音",
                    to: "藏壽司 宇都宮鶴田店",
                    googleMapUrl: "https://www.google.com/maps/dir/?api=1&origin=Heiwa+Kannon&destination=Kura+Sushi+Utsunomiya+Tsuruta",
                    distance: "8 km",
                    estTimeBase: 25,
                    bufferPercent: 1.2,
                    method: "開車",
                    note: "前往市區午餐"
                },
                {
                    type: "spot",
                    arrival: "12:15",
                    departure: "13:15",
                    duration: 60,
                    name: "藏壽司 宇都宮鶴田店 (午餐)",
                    jpName: "くら寿司 宇都宮鶴田店",
                    address: "栃木県宇都宮市鶴田町339-1",
                    phone: "+81-28-649-1610",
                    tags: ["迴轉壽司", "家庭友善"],
                    description: "知名的連鎖迴轉壽司店。使用「鮮度君」保護蓋確保衛生，吃完盤子還可以玩扭蛋遊戲 (Bikkura Pon)，適合家庭用餐。",
                    price: "依消費",
                    parking: "專用停車場",
                    note: "建議可先用 App 預約以節省等候時間"
                },
                {
                    type: "transport",
                    from: "藏壽司",
                    to: "鑁阿寺",
                    googleMapUrl: "https://www.google.com/maps/dir/?api=1&origin=Kura+Sushi+Utsunomiya+Tsuruta&destination=Bannaji+Temple",
                    distance: "35 km",
                    estTimeBase: 65,
                    bufferPercent: 1.2,
                    method: "開車",
                    note: "前往足利市，距離較遠，預留充裕時間"
                },
                {
                    type: "spot",
                    arrival: "14:20",
                    departure: "15:20",
                    duration: 60,
                    name: "鑁阿寺 (Bannaji)",
                    jpName: "鑁阿寺 (ばんなじ)",
                    address: "栃木県足利市家富町2220",
                    phone: "+81-284-41-2627",
                    mapcode: "34 544 327*22",
                    tags: ["國寶", "日本 100 名城", "足利氏"],
                    description: "【日本國寶】\n原為足利氏的宅邸，四周環繞著護城河與土壘，保留了鎌倉時代武家屋敷的面貌。本堂已被指定為國寶。\n境內有一棵樹齡超過 650 年的巨大銀杏樹，氣勢非凡。隔壁就是「足利學校」（日本最古老的大學），兩者可以一併參觀。",
                    price: "境內免費 / 本堂參拜需預約",
                    parking: "太平記館觀光停車場 (免費)",
                    note: "充滿歷史氛圍的散步景點"
                },
                {
                    type: "transport",
                    from: "鑁阿寺",
                    to: "足利織姬神社",
                    googleMapUrl: "https://www.google.com/maps/dir/?api=1&origin=Bannaji+Temple&destination=Ashikaga+Orihime+Shrine",
                    distance: "1.5 km",
                    estTimeBase: 10,
                    bufferPercent: 1.5,
                    method: "開車",
                    note: "短程移動"
                },
                {
                    type: "spot",
                    arrival: "15:35",
                    departure: "16:20",
                    duration: 45,
                    name: "足利織姬神社",
                    jpName: "足利織姫神社",
                    address: "栃木県足利市西宮町3889",
                    phone: "+81-284-22-0313",
                    mapcode: "34 573 243*55",
                    tags: ["結緣聖地", "戀人聖地", "朱紅神殿"],
                    description: "供奉著掌管紡織的神明，被視為產業振興與締結良緣的守護神。需爬上 229 階的石階才能抵達朱紅色的美麗社殿（也有坡道可走）。\n從神社境內可以眺望足利市區與渡良瀨川，視野極佳，被認定為「戀人的聖地」。",
                    price: "免費參拜",
                    parking: "織姬觀光停車場 (免費)",
                    weatherWarning: "階梯較多，請量力而為。"
                },
                {
                    type: "transport",
                    from: "足利織姬神社",
                    to: "野村屋本店",
                    googleMapUrl: "https://www.google.com/maps/dir/?api=1&origin=Ashikaga+Orihime+Shrine&destination=Nomuraya+Honten+Sano",
                    distance: "13 km",
                    estTimeBase: 30,
                    bufferPercent: 1.2,
                    method: "開車",
                    note: "前往佐野市享用晚餐"
                },
                {
                    type: "spot",
                    arrival: "16:50",
                    departure: "17:50",
                    duration: 60,
                    name: "野村屋本店 (晚餐)",
                    jpName: "野村屋本店",
                    address: "栃木県佐野市相生町2819",
                    phone: "+81-283-22-0396",
                    tags: ["佐野名物", "耳烏龍麵", "鄉土料理"],
                    description: "創業於明治時代的老店，以佐野地區獨特的鄉土料理「耳烏龍麵」(Mimi Udon) 聞名。\n麵條形狀像耳朵，據說吃了可以把惡魔的耳朵吃掉，有除厄開運的寓意。口感 Q 彈，搭配濃郁的湯頭。",
                    price: "約 1000-1500円",
                    parking: "店鋪停車場",
                    note: "週四公休 (若遇週四則需調整)"
                },
                {
                    type: "transport",
                    from: "野村屋本店",
                    to: "足利花卉公園",
                    googleMapUrl: "https://www.google.com/maps/dir/?api=1&origin=Nomuraya+Honten+Sano&destination=Ashikaga+Flower+Park",
                    distance: "6 km",
                    estTimeBase: 15,
                    bufferPercent: 1.3,
                    method: "開車",
                    note: "前往欣賞冬季燈飾"
                },
                {
                    type: "spot",
                    arrival: "18:10",
                    departure: "19:40",
                    duration: 90,
                    name: "足利花卉公園 (冬季燈光秀)",
                    jpName: "あしかがフラワーパーク (光の花の庭)",
                    address: "栃木県足利市迫間町607",
                    phone: "+81-284-91-4939",
                    mapcode: "64 513 361*34",
                    tags: ["日本三大燈飾", "夜景遺產", "紫藤"],
                    description: "【日本三大燈飾之一】\n雖然紫藤花季在春天，但冬季的「光之花庭園」利用數百萬顆 LED 燈，將休眠的紫藤樹裝飾得如同盛開般夢幻，是關東地區最知名的冬季夜景。\n園區廣大，還有巨大的光之城堡與花朵燈飾，浪漫指數破表。",
                    price: "夜間票 大人約 1300円 / 兒童 700円",
                    parking: "免費大型停車場",
                    weatherWarning: "夜間戶外賞燈非常寒冷，請務必戴手套、圍巾、毛帽。"
                },
                {
                    type: "transport",
                    from: "足利花卉公園",
                    to: "Super Hotel 佐野藤岡",
                    googleMapUrl: "https://www.google.com/maps/dir/?api=1&origin=Ashikaga+Flower+Park&destination=Super+Hotel+Sano+Fujioka",
                    distance: "6 km",
                    estTimeBase: 15,
                    bufferPercent: 1.3,
                    method: "開車",
                    note: "前往今晚住宿飯店"
                },
                {
                    type: "hotel",
                    arrival: "20:00",
                    name: "Super Hotel 佐野藤岡",
                    jpName: "スーパーホテル佐野藤岡",
                    address: "栃木県佐野市高萩町1344-1",
                    phone: "+81-283-22-9000",
                    checkIn: "15:00~",
                    description: "位於佐野藤岡交流道附近的連鎖商務飯店，交通便利。附設天然溫泉「秀郷の湯」。",
                    price: "已預訂",
                    parking: "免費平面停車場 (90 台)",
                    note: "Check-in 休息，準備明日行程"
                }
            ]
        };

        const day10Data = {
            date: "2026/02/10",
            weekday: "週二",
            weather: {
                start: { location: "佐野市", temp: "12°C / 1°C", condition: "晴", icon: "sun" },
                end: { location: "成田市", temp: "6°C / 0°C", condition: "多雲", icon: "cloud" }
            },
            schedule: [
                {
                    type: "start",
                    time: "08:30",
                    location: "Super Hotel 佐野藤岡",
                    note: "辦理退房，前往成田 (使用高速公路)"
                },
                {
                    type: "transport",
                    from: "Super Hotel",
                    to: "成田山新勝寺",
                    googleMapUrl: "https://www.google.com/maps/dir/?api=1&origin=Super+Hotel+Sano+Fujioka&destination=Naritasan+Shinshoji+Temple",
                    distance: "100 km",
                    estTimeBase: 85,
                    bufferPercent: 1.2,
                    method: "開車 (東北自動車道 -> 圈央道)",
                    note: "長途駕駛請注意休息，預計使用 ETC"
                },
                {
                    type: "spot",
                    arrival: "10:15",
                    departure: "12:45",
                    duration: 150,
                    name: "成田山新勝寺 (含午餐)",
                    jpName: "成田山新勝寺",
                    address: "千葉県成田市成田 1",
                    phone: "+81-476-22-2111",
                    mapcode: "137 734 336*22",
                    tags: ["護摩祈禱", "鰻魚飯", "成田山公園"],
                    description: "【關東三大不動之一】\n擁有千年歷史的古剎，每年吸引千萬人次參拜。大本堂氣勢宏偉，每天舉行的「護摩祈禱」儀式非常莊嚴，遊客也可進入本堂感受。\n表參道上林立著許多鰻魚飯老店 (如駿河屋、川豐)，午餐務必品嚐著名的成田鰻魚飯。",
                    price: "免費參拜",
                    parking: "弘惠會田町停車場 (付費) 或周邊停車場",
                    note: "建議先去餐廳抽號碼牌，再去參拜"
                },
                {
                    type: "transport",
                    from: "成田山新勝寺",
                    to: "酒酒井 Premium Outlets",
                    googleMapUrl: "https://www.google.com/maps/dir/?api=1&origin=Naritasan+Shinshoji+Temple&destination=Shisui+Premium+Outlets",
                    distance: "12 km",
                    estTimeBase: 25,
                    bufferPercent: 1.3,
                    method: "開車",
                    note: "前往機場前的最後購物站"
                },
                {
                    type: "spot",
                    arrival: "13:20",
                    departure: "17:20",
                    duration: 240,
                    name: "酒酒井 Premium Outlets",
                    jpName: "酒々井プレミアム・アウトレット",
                    address: "千葉県印旛郡酒々井町飯積 2-4-1",
                    phone: "+81-43-481-6160",
                    mapcode: "27 733 413*55",
                    tags: ["購物", "Outlet", "美食廣場"],
                    description: "距離成田機場最近的大型 Outlet，擁有約 220 家店鋪。是回國前補齊伴手禮、購買運動品牌與日系服飾的最佳地點。\n若午餐沒吃飽，這裡也有大型美食廣場 (Food Court)。",
                    price: "依消費",
                    parking: "免費大型停車場",
                    note: "請注意停留時間，以免延誤還車"
                },
                {
                    type: "transport",
                    from: "酒酒井 Outlets",
                    to: "Relax-Rent a Car",
                    googleMapUrl: "https://www.google.com/maps/dir/?api=1&origin=Shisui+Premium+Outlets&destination=Relax+International+Car+Rental+Narita",
                    distance: "15 km",
                    estTimeBase: 20,
                    bufferPercent: 1.5,
                    method: "開車 (高速公路)",
                    note: "前往成田機場附近還車，務必先加滿油"
                },
                {
                    type: "spot",
                    arrival: "17:50",
                    departure: "18:10",
                    duration: 20,
                    name: "Relax-Rent a Car (還車)",
                    jpName: "Relax International Rental Car",
                    address: "千葉県成田市新田 90-1",
                    phone: "+81-476-37-5589",
                    tags: ["還車", "檢查"],
                    description: "辦理還車手續。請出示加油收據。\n工作人員檢查車況後，結算 ETC 費用 (若有)。\n確認行李是否都已拿下車。",
                    price: "ETC 費用結算",
                    parking: "店鋪內",
                    note: "還車後需自行前往飯店 (或詢問是否有接駁)"
                },
                {
                    type: "transport",
                    from: "租車店",
                    to: "東橫INN 成田機場新館",
                    googleMapUrl: "https://www.google.com/maps/dir/?api=1&origin=Relax+International+Car+Rental+Narita&destination=Toyoko+Inn+Narita+Airport+Shinkan",
                    distance: "1.5 km",
                    estTimeBase: 10,
                    bufferPercent: 1.5,
                    method: "計程車 / 接駁車",
                    note: "距離很近，搭計程車最方便"
                },
                {
                    type: "hotel",
                    arrival: "18:25",
                    name: "東橫INN 成田機場新館",
                    jpName: "東横INN成田空港新館",
                    address: "千葉県成田市取香 560",
                    phone: "+81-476-33-1045",
                    checkIn: "16:00~",
                    description: "成田機場旁的大型商務飯店。有免費接駁車往返機場。\n大廳有自動販賣機與微波爐，晚餐可於機場或便利商店解決。",
                    price: "已預訂",
                    parking: "飯店停車場 (若有需要)",
                    note: "請務必確認明早前往機場的接駁車時刻表"
                }
            ]
        };

        const day11Data = {
            date: "2026/02/11",
            weekday: "週三",
            weather: {
                start: { location: "成田", temp: "6°C / 0°C", condition: "多雲", icon: "cloud" },
                end: { location: "台北", temp: "18°C", condition: "溫暖", icon: "sun" }
            },
            schedule: [
                {
                    type: "start",
                    time: "09:00",
                    location: "東橫INN 成田機場新館",
                    note: "退房，搭乘飯店接駁車前往機場"
                },
                {
                    type: "transport",
                    from: "東橫INN",
                    to: "成田機場 第一航廈 (T1)",
                    googleMapUrl: "https://www.google.com/maps/dir/?api=1&origin=Toyoko+Inn+Narita+Airport+Shinkan&destination=Narita+Airport+Terminal+1",
                    distance: "2 km",
                    estTimeBase: 15,
                    bufferPercent: 1.5,
                    method: "飯店接駁車",
                    note: "Pokémon Store 位於 T1 4F。請先在 T1 下車。"
                },
                {
                    type: "spot",
                    arrival: "09:30",
                    departure: "10:30",
                    duration: 60,
                    name: "Pokémon Store 成田機場店 (T1店)",
                    jpName: "ポケモンストア 成田空港店",
                    address: "成田國際機場第 1 旅客航廈 4 樓 (南翼)",
                    phone: "+81-476-37-5192",
                    tags: ["寶可夢", "機長皮卡丘", "T1新址"],
                    description: "【注意：已搬遷至 T1】\n位於第一航廈 4 樓。這裡有穿著機長與空服員制服的成田機場限定皮卡丘，是必買的紀念品。\n雖然店鋪不大，但熱門商品齊全。請在入關前完成購買。",
                    price: "依消費",
                    parking: "機場停車場",
                    note: "營業時間 9:00~20:00 (T1 4樓)"
                },
                {
                    type: "transport",
                    from: "第一航廈 (T1)",
                    to: "第二航廈 (T2)",
                    googleMapUrl: "",
                    distance: "1.5 km",
                    estTimeBase: 10,
                    bufferPercent: 1.5,
                    method: "機場接駁巴士 (Terminal Shuttle)",
                    note: "虎航 (IT201) 位於 T2。請至 T1 一樓搭乘接駁車前往 T2。"
                },
                {
                    type: "spot",
                    arrival: "11:00",
                    departure: "12:00",
                    duration: 60,
                    name: "辦理登機 & 午餐 (T2)",
                    jpName: "Check-in & Lunch",
                    address: "成田機場 第二航廈 3 樓出境大廳",
                    tags: ["虎航櫃台", "午餐"],
                    description: "1. 先至虎航櫃台辦理登機與託運 (虎航 IT201 在 T2 辦理)。\n2. 辦完後在 T2 4 樓商店街享用午餐 (推薦：謝朋殿、壽司田等)。",
                    price: "依消費",
                    parking: "-",
                    note: "IT201 預計 13:00 起飛，建議 11:00 前完成報到"
                },
                {
                    type: "transport",
                    from: "成田機場 (T2)",
                    to: "台灣桃園機場",
                    distance: "2100 km",
                    estTimeBase: 240,
                    bufferPercent: 1.0,
                    method: "飛機 (Tigerair IT201)",
                    note: "13:00 起飛 -> 16:25 抵達桃園 (預計)"
                },
                {
                    type: "spot",
                    arrival: "16:25",
                    name: "抵達台灣",
                    description: "平安返抵國門，旅程結束。",
                    price: "-",
                    parking: "-",
                    note: "Welcome Home!"
                }
            ]
        };

        const daysMap = {
            1: day1Data,
            2: day2Data,
            3: day3Data,
            4: day4Data,
            5: day5Data,
            6: day6Data,
            7: day7Data,
            8: day8Data,
            9: day9Data,
            10: day10Data,
            11: day11Data
        };

        // --- COMPONENT LOGIC ---

        const calculateBufferedTime = (baseTime, buffer) => {
            const raw = baseTime * buffer;
            return Math.ceil(raw / 5) * 5;
        };

        const Sidebar = ({ currentDay, setDay }) => {
            const days = Array.from({ length: 11 }, (_, i) => i + 1);
            return (
                <div className="w-full md:w-64 bg-slate-900 text-slate-300 flex-shrink-0 h-auto md:h-screen overflow-y-auto z-50">
                    <div className="p-6 font-bold text-white text-xl flex items-center gap-2 sticky top-0 bg-slate-900 z-10">
                        <Icon name="map" size={24} />
                        東北家族旅遊
                    </div>
                    <nav className="flex md:flex-col overflow-x-auto md:overflow-visible hide-scrollbar pb-4 md:pb-0">
                        {days.map(d => {
                            const hasData = daysMap[d];
                            return (
                                <button 
                                    key={d}
                                    onClick={() => hasData && setDay(d)}
                                    disabled={!hasData}
                                    className={`flex items-center gap-3 px-6 py-4 text-left whitespace-nowrap transition-colors border-l-4 
                                        ${d === currentDay 
                                            ? 'bg-blue-600 text-white border-blue-400' 
                                            : hasData 
                                                ? 'hover:bg-slate-800 border-transparent cursor-pointer' 
                                                : 'opacity-40 border-transparent cursor-not-allowed'
                                        }`}
                                >
                                    <span className="font-mono text-sm opacity-60">Day {d}</span>
                                    <span className="font-medium">
                                        {d === 1 ? "2/01 (日)" :
                                         d === 2 ? "2/02 (一)" : 
                                         d === 3 ? "2/03 (二)" : 
                                         d === 4 ? "2/04 (三)" : 
                                         d === 5 ? "2/05 (四)" : 
                                         d === 6 ? "2/06 (五)" :
                                         d === 7 ? "2/07 (六)" : 
                                         d === 8 ? "2/08 (日)" : 
                                         d === 9 ? "2/09 (一)" : 
                                         d === 10 ? "2/10 (二)" : 
                                         d === 11 ? "2/11 (三)" : "待規劃"}
                                    </span>
                                </button>
                            );
                        })}
                    </nav>
                </div>
            );
        };

        const WeatherWidget = ({ start, end }) => (
            <div className="bg-white rounded-xl p-4 shadow-sm border border-slate-200 mb-6 flex flex-col md:flex-row gap-4 justify-between items-center animate-fade-in">
                <div className="flex items-center gap-4 w-full md:w-auto">
                    <div className={`p-3 rounded-full ${start.condition.includes("雪") ? 'bg-blue-100 text-blue-600' : 'bg-orange-100 text-orange-600'}`}>
                        <Icon name={start.icon} size={24} />
                    </div>
                    <div>
                        <div className="text-xs text-slate-500">出發地氣象 ({start.location})</div>
                        <div className="font-bold text-slate-800">{start.temp}</div>
                        <div className="text-sm text-slate-600">{start.condition}</div>
                    </div>
                </div>
                
                <div className="hidden md:block h-10 w-px bg-slate-200"></div>
                <div className="w-full h-px bg-slate-200 md:hidden"></div>

                <div className="flex items-center gap-4 w-full md:w-auto">
                    <div className={`p-3 rounded-full ${end.condition.includes("雪") ? 'bg-blue-100 text-blue-600' : (end.condition.includes("雨") ? 'bg-gray-100 text-gray-600' : (end.condition.includes("溫暖") ? 'bg-red-100 text-red-600' : 'bg-blue-50 text-blue-600'))}`}>
                        <Icon name={end.icon} size={24} />
                    </div>
                    <div>
                        <div className="text-xs text-slate-500">目的地氣象 ({end.location})</div>
                        <div className="font-bold text-slate-800">{end.temp}</div>
                        <div className="text-sm text-slate-600">{end.condition}</div>
                    </div>
                </div>
                <div className="text-xs text-slate-400 bg-slate-50 px-3 py-2 rounded">
                    ⚠️ 數據來源：tenki.jp 歷年同期平均氣候模擬。
                </div>
            </div>
        );

        const TransportCard = ({ data }) => {
            const bufferedTime = calculateBufferedTime(data.estTimeBase, data.bufferPercent);
            return (
                <div className="relative pl-12 py-4 animate-slide-up">
                    <div className="absolute left-[21px] top-1/2 -translate-y-1/2 bg-slate-200 rounded-full p-1.5 z-10 border-4 border-slate-50">
                        <Icon name={data.method.includes("飛機") ? "plane" : "car"} size={16} className="text-slate-600" />
                    </div>
                    <div className="bg-slate-50 rounded-lg p-4 border border-slate-200 hover:border-blue-300 transition-colors group">
                        <div className="flex flex-col md:flex-row justify-between md:items-center gap-3">
                            <div>
                                <div className="text-sm font-semibold text-slate-600 flex items-center gap-2">
                                    <span className="bg-slate-200 px-2 py-0.5 rounded text-xs text-slate-700">移動</span>
                                    {data.method}
                                </div>
                                <div className="text-xs text-slate-500 mt-1">
                                    預估 {data.estTimeBase} 分 + 緩衝 {(bufferedTime - data.estTimeBase)} 分
                                </div>
                                {data.note && (
                                    <div className="text-xs text-amber-600 mt-1 font-medium flex items-center gap-1">
                                        <Icon name="alert-circle" size={12} />
                                        {data.note}
                                    </div>
                                )}
                            </div>
                            <div className="text-right">
                                <div className="font-mono text-lg font-bold text-slate-700">{bufferedTime} <span className="text-sm font-normal text-slate-500">分鐘</span></div>
                                <div className="text-xs text-slate-500">{data.distance}</div>
                            </div>
                            {data.googleMapUrl && (
                                <a 
                                    href={data.googleMapUrl} 
                                    target="_blank"
                                    className="flex items-center justify-center gap-2 bg-white border border-slate-300 hover:bg-blue-50 hover:text-blue-600 text-slate-700 px-4 py-2 rounded text-sm font-medium transition-colors shadow-sm"
                                >
                                    <Icon name="map-pin" size={16} />
                                    導航
                                </a>
                            )}
                        </div>
                    </div>
                </div>
            );
        };

        const SpotCard = ({ data }) => {
            const isHotel = data.type === 'hotel';
            return (
                <div className="relative pl-12 py-6 animate-slide-up">
                    <div className={`absolute left-4 top-8 w-4 h-4 rounded-full border-4 border-slate-50 z-10 ${isHotel ? 'bg-indigo-500' : 'bg-emerald-500'}`}></div>
                    <div className="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
                        <div className={`h-2 w-full ${isHotel ? 'bg-indigo-500' : 'bg-emerald-500'}`}></div>
                        <div className="p-5">
                            <div className="flex flex-col md:flex-row justify-between items-start gap-4 mb-4">
                                <div>
                                    <div className="flex items-center gap-3 mb-1">
                                        <span className="font-mono text-2xl font-bold text-slate-800">{data.arrival}</span>
                                        {data.departure && (
                                            <span className="text-sm text-slate-400 font-mono bg-slate-100 px-2 py-1 rounded">
                                                停留 {data.duration} 分
                                            </span>
                                        )}
                                    </div>
                                    <h3 className="text-xl font-bold text-slate-900">{data.name}</h3>
                                    <div className="text-sm text-slate-500 font-medium">{data.jpName}</div>
                                </div>
                                {data.tags && (
                                    <div className="flex gap-2 flex-wrap justify-end">
                                        {data.tags.map(tag => (
                                            <span key={tag} className="px-2 py-1 bg-slate-100 text-slate-600 text-xs rounded-full border border-slate-200">
                                                #{tag}
                                            </span>
                                        ))}
                                    </div>
                                )}
                            </div>

                            <div className="grid grid-cols-1 md:grid-cols-2 gap-6 text-sm">
                                <div className="space-y-3">
                                    <div className="p-3 bg-slate-50 rounded-lg text-slate-700 leading-relaxed border border-slate-100 whitespace-pre-line">
                                        {data.description}
                                    </div>
                                    {data.weatherWarning && (
                                        <div className="flex items-center gap-2 text-amber-700 bg-amber-50 px-3 py-2 rounded text-xs border border-amber-100">
                                            <Icon name="thermometer-snowflake" size={14} />
                                            {data.weatherWarning}
                                        </div>
                                    )}
                                </div>
                                <div className="space-y-2">
                                    {data.address && (
                                        <div className="flex items-start gap-2">
                                            <Icon name="map" size={16} className="text-slate-400 mt-0.5" />
                                            <span className="text-slate-600 select-all">{data.address}</span>
                                        </div>
                                    )}
                                    {data.phone && (
                                        <div className="flex items-center gap-2">
                                            <Icon name="phone" size={16} className="text-slate-400" />
                                            <a href={`tel:${data.phone.replace(/[^0-9+]/g, '')}`} className="text-slate-600 hover:text-blue-600 transition-colors select-all">
                                                {data.phone}
                                            </a>
                                        </div>
                                    )}
                                    {data.mapcode && (
                                        <div className="flex items-center gap-2">
                                            <Icon name="navigation" size={16} className="text-slate-400" />
                                            <span className="font-mono bg-slate-100 px-2 py-0.5 rounded text-slate-700 select-all font-bold">
                                                MC: {data.mapcode}
                                            </span>
                                        </div>
                                    )}
                                    {data.price && (
                                        <div className="flex items-center gap-2">
                                            <Icon name="ticket" size={16} className="text-slate-400" />
                                            <span className="text-slate-600">{data.price}</span>
                                        </div>
                                    )}
                                    {data.parking && (
                                        <div className="flex items-center gap-2">
                                            <Icon name="parking-circle" size={16} className="text-slate-400" />
                                            <span className="text-slate-600">{data.parking}</span>
                                        </div>
                                    )}
                                    {data.note && (
                                        <div className="flex items-center gap-2">
                                            <Icon name="info" size={16} className="text-slate-400" />
                                            <span className="text-amber-600">{data.note}</span>
                                        </div>
                                    )}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        const StartNode = ({ data }) => (
            <div className="relative pl-12 pb-6 animate-slide-up">
                <div className="absolute left-4 top-1 w-4 h-4 rounded-full bg-slate-800 border-4 border-slate-50 z-10"></div>
                <div>
                    <div className="font-mono text-xl font-bold text-slate-800">{data.time}</div>
                    <div className="text-lg font-bold text-slate-900">{data.location}</div>
                    <div className="text-sm text-slate-500">{data.note}</div>
                </div>
            </div>
        );

        const App = () => {
            const [currentDay, setCurrentDay] = useState(1);
            const data = daysMap[currentDay];
            const contentRef = useRef(null);

            useEffect(() => {
                lucide.createIcons();
                // Scroll top when day changes
                if(contentRef.current) {
                    contentRef.current.scrollTop = 0;
                }
                window.scrollTo(0, 0);
            }, [currentDay]);

            return (
                <div className="flex flex-col md:flex-row min-h-screen">
                    <Sidebar currentDay={currentDay} setDay={setCurrentDay} />
                    
                    <main className="flex-1 p-4 md:p-8 max-w-4xl mx-auto w-full" ref={contentRef}>
                        <header className="mb-8 border-b border-slate-200 pb-4">
                            <div className="flex justify-between items-end mb-2">
                                <h1 className="text-3xl font-bold text-slate-900">Day {currentDay}</h1>
                                <div className="text-right">
                                    <div className="text-2xl font-mono text-slate-800">{data.date}</div>
                                    <div className="text-slate-500 font-medium">{data.weekday}</div>
                                </div>
                            </div>
                        </header>

                        <WeatherWidget start={data.weather.start} end={data.weather.end} />

                        <div className="relative mt-8 pb-10">
                            <div className="timeline-line"></div>
                            
                            {data.schedule.map((item, index) => {
                                if (item.type === 'start') return <StartNode key={index} data={item} />;
                                if (item.type === 'transport') return <TransportCard key={index} data={item} />;
                                if (item.type === 'spot' || item.type === 'hotel') return <SpotCard key={index} data={item} />;
                                return null;
                            })}
                        </div>

                        <footer className="mt-4 text-center text-slate-400 text-sm pb-8 border-t border-slate-200 pt-8">
                            此行程表時間已包含 +10% ~ 20% 交通緩衝。請根據當日實際路況與天氣調整。
                        </footer>
                    </main>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
